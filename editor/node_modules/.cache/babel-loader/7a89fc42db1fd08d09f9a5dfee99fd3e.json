{"ast":null,"code":"import _classCallCheck from\"/Users/rlborgen/git/ionconfig/editor/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/rlborgen/git/ionconfig/editor/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/rlborgen/git/ionconfig/editor/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/rlborgen/git/ionconfig/editor/node_modules/@babel/runtime/helpers/esm/createSuper.js\";//        Command.jsx     Command React Component\n//\n//        Copyright (c) 2018, California Institute of Technology.\n//        ALL RIGHTS RESERVED.  U.S. Government Sponsorship\n//        acknowledged.\n//                                                                   \n//      Author: Rick Borgen, Jet Propulsion Laboratory         \n//                                                               \nimport React from'react';import{FormControl}from'react-bootstrap';import{Grid,Row,Col}from'react-bootstrap';import{Label,Button,ButtonToolbar}from'react-bootstrap';import{Panel}from'react-bootstrap';import{Glyphicon}from'react-bootstrap';import{Alert}from'react-bootstrap';import Datetime from'react-datetime';import'react-datetime/css/react-datetime.css';import'moment';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Command=/*#__PURE__*/function(_React$Component){_inherits(Command,_React$Component);var _super=_createSuper(Command);function Command(props){var _this;_classCallCheck(this,Command);_this=_super.call(this,props);_this.handleParamChange=function(idx,e){var val=e.target.value;console.log(\">>> param change!\"+e+\" idx = \"+idx+\" value= \"+val);var newState=Object.assign({},_this.state);console.log(\">>> param old value = \"+newState.values[idx]);newState.values[idx]=val;_this.setState(newState);_this.render();e.preventDefault();};_this.handleDatetimeChange=function(idx,m){console.log(\">>>handleDatetimeChange  m: \"+typeof m);var time=null;//    if (typeof m !== \"undefined\") {\nif(typeof m===\"object\"){time=m.format('YYYY/MM/DD-HH:mm:ss');console.log(\">>> datetime change! idx= \"+idx+\" time= \"+time);}else{var nowDate=new Date();nowDate.setUTCHours(0,0,0);var nowStr=nowDate.toISOString();nowStr=nowStr.replace('T','?');time=nowStr.slice(0,19);console.log(\">>> datetime nulled! idx= \"+idx+\" time= \"+time);}var newState=Object.assign({},_this.state);console.log(\">>> param old value = \"+newState.values[idx]+\"  new value = \"+time);newState.values[idx]=time;_this.setState(newState);_this.render();};_this.handleParamSelect=function(idx,e){var val=e.target.value;console.log(\">>> param selection!\"+e+\" idx = \"+idx+\" value= \"+val);var newState=Object.assign({},_this.state);console.log(\">>> param old value = \"+newState.values[idx]);newState.values[idx]=val;_this.setState(newState);_this.render();e.preventDefault();};_this.edit=function(){// activated by Edit/Submit button\nvar newState=Object.assign({},_this.state);var editMode=_this.state.editMode;if(editMode){console.log(\"let's submit!\");newState.viewMode=false;// force viewing\n}else{console.log(\"let's edit!\");newState.viewMode=true;// force viewing\n}newState.editMode=!editMode;// toggle mode\n_this.setState(newState);if(editMode)_this.submit();};_this.noedit=function(){// activated by Cancel button\nvar newState=Object.assign({},_this.state);newState.editMode=false;// cancel editing\nnewState.viewMode=false;// cancel viewing\n_this.setState(newState);};_this.submit=function(){// callable by edit (above)\nconsole.log(\"submit updates!  initValues:\"+JSON.stringify(_this.props.initValues));var tran={action:\"UPDATE-COMMAND\",nodeKey:_this.props.nodeKey,cmdKey:_this.props.cmdKey,values:_this.state.values,initValues:_this.props.initValues};_this.props.dispatch(tran);};_this.delete=function(){console.log(\"submit delete!  cmdKey:\"+_this.props.cmdKey);var msg=\"\";// no error, no msg\nif(_this.hasClonedValue()){msg=\"Cannot delete while command value is cloned.  See clones survey.\";console.log(msg);}else console.log(\"Command value is NOT Cloned.\");if(msg===\"\"){// all good!\nvar tran={action:\"DELETE-COMMAND\",nodeKey:_this.props.nodeKey,configKey:_this.props.configKey,cmdKey:_this.props.cmdKey};_this.props.dispatch(tran);}else{console.log(\"Delete rejected.\");_this.setState({cmdMsg:msg});}};_this.view=function(){// activated by view/hide button\nvar newState=Object.assign({},_this.state);var viewMode=_this.state.viewMode;if(viewMode)console.log(\"let's hide view panel!\");else console.log(\"let's show view panel!\");newState.viewMode=!viewMode;_this.setState(newState);};_this.dict=function(){var newState=Object.assign({},_this.state);var dictMode=_this.state.dictMode;if(dictMode)console.log(\"let's hide dictionary panel!\");else console.log(\"let's show dictionary panel!\");newState.dictMode=!dictMode;_this.setState(newState);};_this.entry=function(){var newState=Object.assign({},_this.state);var entryMode=_this.state.entryMode;if(entryMode)console.log(\"let's hide file entry panel!\");else console.log(\"let's show file entry panel!\");newState.entryMode=!entryMode;_this.setState(newState);};var vals=props.initValues.slice(0);_this.state={editMode:false,viewMode:false,dictMode:false,entryMode:false,cmdMsg:\"\",values:vals};//console.log(\"Command values: \" + this.state.values);\nreturn _this;}_createClass(Command,[{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(newProps){// only update initVals for commands affected by cloning\nif(this.props.cmdType.pickClone)//console.log(\"+++ cmdType\" + this.props.name + \" gets pick-cloned\");\nthis.updateInitVals(newProps);if(this.props.cmdType.copyClone)//console.log(\"+++ cmdType\" + this.props.name + \" gets copy-cloned\");\nthis.updateInitVals(newProps);return null;}// new props have come in for a clone-able command\n},{key:\"updateInitVals\",value:function updateInitVals(newProps){var newState=Object.assign({},this.state);//console.log(\"updateInitValues = \" + newProps.initValues);\nnewState.values=newProps.initValues.slice(0);newState.editMode=false;// a submit must have happened\nnewState.viewMode=false;// a submit must have happened\nthis.setState(newState);//console.log(\">>>updateInitVals state= \" + JSON.stringify(this.state));\nreturn null;}},{key:\"makeAlertElem\",value:function makeAlertElem(msg){return/*#__PURE__*/_jsx(Alert,{bsStyle:\"danger\",children:/*#__PURE__*/_jsxs(\"b\",{children:[\"ERROR: \",msg]})});}// check if this command owns a value that is cloned\n},{key:\"hasClonedValue\",value:function hasClonedValue(){var cloneVals=this.props.cloneValues;var cKey=this.props.cmdKey;if(cloneVals.hasOwnProperty(cKey)){// is this a clone-able command?\nvar cloneVal=cloneVals[cKey];if(cloneVal.clones.length>0)// and a clone exists?\nreturn true;};return false;}},{key:\"makeSelectFormElem\",value:function makeSelectFormElem(valIdx,options){var value=this.state.values[valIdx];//console.log(\"makeSelectFormElem valIdx= \" + valIdx + \"  value: \" + val);\nvar form=/*#__PURE__*/_jsx(FormControl,{readOnly:!this.state.editMode,disabled:!this.state.editMode,bsSize:\"sm\",componentClass:\"select\",value:value,onChange:this.handleParamSelect.bind(null,valIdx),children:options});return form;}},{key:\"makeShowForm\",value:function makeShowForm(idx){// show current value with selection widget\nvar value=this.state.values[idx];var form=/*#__PURE__*/_jsx(FormControl,{readOnly:\"true\",bsSize:\"sm\",type:\"text\",value:value});return form;}},{key:\"makeFieldForm\",value:function makeFieldForm(idx,type){// assume readOnly, unless editable and in editmode\n//console.log(\"makeFileForm idx = \" + idx + \" type = \" + type);\n//console.log(\"makeFileForm value = \" + this.state.values[idx]);\nvar param=this.props.params[idx];var justread=!this.state.editMode||param.copyClone;//const cmdKey = this.props.cmdKey;\nvar value=this.state.values[idx];var form=/*#__PURE__*/_jsx(FormControl,{readOnly:justread,bsSize:\"sm\",type:type,value:value,spellCheck:\"false\",onChange:this.handleParamChange.bind(null,idx)});return form;}},{key:\"makeDatetimeForm\",value:function makeDatetimeForm(idx){var ionTimeStr=this.state.values[idx];//  it is recommended practice to parse by hand,  never use Date.parse\nvar time=null;if(ionTimeStr===''){time=new Date();time.setUTCHours(0,0,0);}else{var parts=[],dparts=[],tparts=[];parts=ionTimeStr.split('-');//console.log(\"date parse -- date: \" + parts[0] + \" time: \" + parts[1]);\nconsole.log(\"date parse -- parts: \"+JSON.stringify(parts));dparts=parts[0].split('/');tparts=parts[1].split(':');time=new Date(Date.UTC(dparts[0],dparts[1]-1,dparts[2],tparts[0],tparts[1],tparts[2]));console.log(\"date parse: \"+JSON.stringify(dparts)+' '+JSON.stringify(tparts));}console.log('makeDatetime  ionTime= '+ionTimeStr+\" Date= \"+time.toUTCString());// NOTE: this is an UN-controlled component (no value provided)\n//   which avoids messy issues mid-edit\nvar form=/*#__PURE__*/_jsx(Datetime,{defaultValue:time,utc:true,dateFormat:\"YYYY/MM/DD\",timeFormat:\"HH:mm:ss\",onChange:this.handleDatetimeChange.bind(null,idx)});return form;}},{key:\"makeParamElem\",value:function makeParamElem(pKey,pIdx){var param=this.props.params[pIdx];//console.log(\"Command-makeParamElem valueType = \" + param.valueType + \" idx =\" + pIdx);\nvar f=null;var show=null;var width=3;var menuFlag=false;// assume standard form, not menu\nvar note=\"from all nodes\";// note used with dynamic menus\nif(param.valueType===\"number\"){f=this.makeFieldForm(pIdx,\"number\");width=1;}else if(param.valueType===\"text\"){f=this.makeFieldForm(pIdx,\"text\");width=2;}else if(param.valueType===\"datetime\"){f=this.makeDatetimeForm(pIdx);width=2;}else if(param.copyClone){f=this.makeShowForm(pIdx);width=1;}else{// must be menu type\nshow=this.makeShowForm(pIdx);// infer match type based on valueType\nvar matchType=\"all\";// assume matching all, at first\nif(param.valueType.indexOf(\"select\")>=0){//no note needed for simple select\nnote=\"\";}else if(param.valueType.indexOf(\"nodeNum\")>=0){// nodes should be external\nif(param.typeKey.indexOf(\"ovrd\")>=0){// except for override commands (ipn)\nmatchType=\"all\";}else if(this.props.usedNodeKey(this.props.nodeKey)){// if this nodeKey is \"real\",need to exclude\nmatchType=\"exclude\";// but for contacts,  nodeKey is artificial\nnote=\"from other nodes only\";};}else if(param.valueType.indexOf(\"ipAddr\")>=0){// ipAddrs should be local\nmatchType=\"match\";note=\"from this host only\";}else if(param.valueType.indexOf(\"Induct\")>=0// inducts should be external\n||param.valueType.indexOf(\"Link\")>=0// links should be external\n||param.valueType.indexOf(\"Endpoint\")>=0){// endpoints should be external\nmatchType=\"exclude\";note=\"from other nodes only\";}else if(param.valueType.indexOf(\"Outduct\")>=0){// outducts should be local\nmatchType=\"match\";note=\"from this node only\";};f=this.makeMenuForm(param,pIdx,matchType);menuFlag=true;};var justread=!(this.state.editMode&&!param.cloned);var cmdKey=this.props.cmdKey;var values=this.props.getValues(cmdKey);var value=values[pIdx];var pElem=null;if(note!==\"\")note='('+note+')';if(menuFlag){pElem=/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{className:\"text-right\",sm:3,children:/*#__PURE__*/_jsx(\"b\",{children:param.name})}),/*#__PURE__*/_jsx(Col,{sm:2,value:value,children:show}),/*#__PURE__*/_jsx(Col,{sm:2,type:param.type,value:value,readOnly:justread,children:f}),/*#__PURE__*/_jsx(Col,{sm:2,children:note})]},pIdx);}else{// standard form control\npElem=/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{className:\"text-right\",sm:3,children:/*#__PURE__*/_jsx(\"b\",{children:param.name})}),/*#__PURE__*/_jsx(Col,{sm:width,type:param.type,value:value,readOnly:justread,children:f}),/*#__PURE__*/_jsx(Col,{sm:2,children:param.units})]},pIdx);};return pElem;}},{key:\"makeMenuForm\",value:function makeMenuForm(param,pIdx,matchType){var f=null;var opts=null;var myNodeKey=this.props.nodeKey;// send the local node to filter needed values\nvar myHostKey=this.props.hostKey;// unless using the hostKey instead!\nif(param.valueType===\"select\"){console.log(\"+++select detected\");var paramId=param.typeKey;opts=this.props.makeOptionElems(paramId);}else if(param.valueType===\"ipAddr\"){console.log(\"+++ ipAddr pick detected!\");opts=this.props.makeTypeOptions(param.valueType,myHostKey,matchType);}else if(param.pickClone){console.log(\"+++\"+param.valueType+\" pick detected!\");opts=this.props.makeTypeOptions(param.valueType,myNodeKey,matchType);};f=this.makeSelectFormElem(pIdx,opts);return f;}},{key:\"makeEditFlagElem\",value:function makeEditFlagElem(editFlag){if(editFlag){return/*#__PURE__*/_jsx(Col,{sm:1,children:/*#__PURE__*/_jsx(Button,{bsSize:\"sm\",bsStyle:\"danger\",children:\"??\"})});}return\"\";}},{key:\"makeCommandEditor\",value:function makeCommandEditor(paramKeys){var _this2=this;var commandElems=paramKeys.map(function(paramKey,idx){return _this2.makeParamElem(paramKey,idx);});var dictMode=this.state.dictMode;var entryMode=this.state.entryMode;var dictLabel=dictMode?'Hide Dictionary':'Show Dictionary';var entryLabel=entryMode?'Hide File Entry':'Show File Entry';var dictPanel=null;if(dictMode)dictPanel=this.makeDict();var entryPanel=null;if(entryMode)entryPanel=this.makeFileEntry();// check for alert\nvar msg=this.state.cmdMsg;var alert=msg===\"\"?\"\":this.makeAlertElem(msg);var icon='remove';var head=/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{sm:5,children:[\" \",/*#__PURE__*/_jsx(Label,{bsSize:\"lg\",bsStyle:\"default\",children:\"Command Editor\"})]}),/*#__PURE__*/_jsx(Col,{sm:4,children:/*#__PURE__*/_jsxs(ButtonToolbar,{children:[/*#__PURE__*/_jsx(Button,{bsSize:\"sm\",bsStyle:\"info\",onClick:this.dict,children:dictLabel}),/*#__PURE__*/_jsx(Button,{bsSize:\"sm\",bsStyle:\"info\",onClick:this.entry,children:entryLabel}),/*#__PURE__*/_jsx(Button,{bsSize:\"sm\",bsStyle:\"danger\",onClick:this.delete,children:\"Delete\"}),/*#__PURE__*/_jsx(Button,{bsSize:\"sm\",bsStyle:\"success\",onClick:this.noedit,children:/*#__PURE__*/_jsx(Glyphicon,{glyph:icon})})]})}),/*#__PURE__*/_jsx(Col,{sm:4,children:alert})]},\"head\");commandElems.unshift(head);return/*#__PURE__*/_jsxs(\"div\",{children:[commandElems,/*#__PURE__*/_jsx(Panel,{collapsible:true,expanded:dictMode,children:dictPanel}),/*#__PURE__*/_jsx(Panel,{collapsible:true,expanded:entryMode,children:entryPanel})]});}},{key:\"makeCommandViewer\",value:function makeCommandViewer(paramKeys){var _this3=this;var commandElems=paramKeys.map(function(paramKey,idx){return _this3.makeReadElem(paramKey,idx);});var dictMode=this.state.dictMode;var entryMode=this.state.entryMode;var dictLabel=dictMode?'Hide Dictionary':'Show Dictionary';var entryLabel=entryMode?'Hide File Entry':'Show File Entry';var dictPanel=null;if(dictMode)dictPanel=this.makeDict();var entryPanel=null;if(entryMode)entryPanel=this.makeFileEntry();var head=/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{sm:5,children:/*#__PURE__*/_jsx(Label,{bsSize:\"lg\",bsStyle:\"default\",children:\"Command Viewer\"})}),/*#__PURE__*/_jsx(Col,{sm:3,children:/*#__PURE__*/_jsxs(ButtonToolbar,{children:[/*#__PURE__*/_jsx(Button,{bsSize:\"sm\",bsStyle:\"info\",onClick:this.dict,children:dictLabel}),/*#__PURE__*/_jsx(Button,{bsSize:\"sm\",bsStyle:\"info\",onClick:this.entry,children:entryLabel})]})})]},\"head\");commandElems.unshift(head);return/*#__PURE__*/_jsxs(\"div\",{children:[commandElems,/*#__PURE__*/_jsx(Panel,{collapsible:true,expanded:dictMode,children:dictPanel}),/*#__PURE__*/_jsx(Panel,{collapsible:true,expanded:entryMode,children:entryPanel})]});}},{key:\"makeReadElem\",value:function makeReadElem(paramKey,pIdx){//console.log(\">>MakeNodeElem \" + prop + ' ' + type + ' ' + val + ' ' + size);\nvar param=this.props.params[pIdx];var cmdKey=this.props.cmdKey;var values=this.props.getValues(cmdKey);var val=values[pIdx];var name=param.name;var size=2;if(param.valueType===\"number\")size=1;var form=/*#__PURE__*/_jsx(FormControl,{readOnly:\"true\",bsSize:\"sm\",type:\"text\",value:val});return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{className:\"text-right\",sm:3,children:/*#__PURE__*/_jsx(\"b\",{children:name})}),/*#__PURE__*/_jsx(Col,{sm:size,value:val,children:form}),/*#__PURE__*/_jsx(Col,{sm:2,children:param.units})]},name);}},{key:\"makeParamInfo\",value:function makeParamInfo(param,pIdx){//console.log(\"makeParamInfo idx= \" + pIdx + \" param=\" + JSON.stringify(param) );\nvar targets=[\"[1]\",\"[2]\",\"[3]\",\"[4]\",\"[5]\",\"[6]\",\"[7]\",\"[8]\"];var posTag=targets[pIdx];var pName=param.name;var valType=param.valueType;var def=param.defaultValue;if(def==='')def='[none]';var units=param.units;if(units==='')units='[none]';var flags=\"\";if(param.showDefault)flags+=\" showDefault\";if(param.copyClone)flags+=\" copyClone\";if(param.pickClone)flags+=\" pickClone\";if(flags==='')flags='[none]';var opt=\"required\";if(param.optional){opt=\"optional\";}return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{sm:2,children:[posTag,\" \",pName]}),/*#__PURE__*/_jsx(Col,{sm:1,children:opt}),/*#__PURE__*/_jsx(Col,{sm:1,children:valType}),/*#__PURE__*/_jsx(Col,{sm:1,children:units}),/*#__PURE__*/_jsx(Col,{sm:2,children:flags}),/*#__PURE__*/_jsx(Col,{sm:2,children:def}),/*#__PURE__*/_jsx(Col,{sm:3})]},pIdx);}},{key:\"makeFileEntry\",value:function makeFileEntry(){var lf=\"\\n\";// assign linefeed format for text files\nvar cmdLines=this.makeCmdLines();var page=cmdLines.join(lf)+lf;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{sm:4,children:/*#__PURE__*/_jsx(Label,{bsStyle:\"default\",children:\"Command File Entry\"})}),/*#__PURE__*/_jsxs(Col,{className:\"text-left\",sm:3,children:[/*#__PURE__*/_jsx(\"b\",{children:\"Last updated: \"}),this.props.lastUpdate]})]}),/*#__PURE__*/_jsx(\"pre\",{children:page})]});}},{key:\"makeCmdLines\",value:function makeCmdLines(){var _this4=this;var cmdLines=this.props.params.map(function(param,idx){return _this4.makeParamLine(param,idx);});var cmdName=this.props.cmdType.name;var cmdNameStr=\"#  \"+cmdName.toUpperCase();cmdLines.unshift(cmdNameStr);var cmdTypeKey=this.props.cmdTypeKey;var cmdKey=this.props.cmdKey;var vals=this.props.getValues(cmdKey);var cmdStr=this.props.makeCmd(cmdTypeKey,vals);cmdLines.push(cmdStr);return cmdLines;}},{key:\"makeParamLine\",value:function makeParamLine(param,pIdx){var pTypeKey=param.typeKey;var cmdKey=this.props.cmdKey;var values=this.props.getValues(cmdKey);var val=values[pIdx];var note=this.props.makeParamNote(pTypeKey,pIdx,val);return note;}},{key:\"makeDict\",value:function makeDict(){var _this5=this;console.log(\"$$$ makeDictionary\");var cmdTypeKey=this.props.cmdTypeKey;var cmdPat=this.props.cmdPattern;var cmdTypeObj=this.props.cmdType;var flags=\"\";if(cmdTypeObj.multiple)flags+=\" multiple\";else flags+=\" singleton\";if(cmdTypeObj.copyClone)flags+=\", copyClone\";if(cmdTypeObj.isCloned)flags+=\", isCloned\";var order=cmdTypeObj.order;var paramElems=this.props.params.map(function(param,idx){return _this5.makeParamInfo(param,idx);});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{sm:1,className:\"text-left\",children:/*#__PURE__*/_jsx(Label,{bsStyle:\"default\",children:\"Command Dictionary\"})})}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{sm:2,className:\"text-left\",children:/*#__PURE__*/_jsx(\"b\",{children:cmdTypeKey})}),/*#__PURE__*/_jsxs(Col,{sm:1,className:\"text-left\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Order: \"}),order]}),/*#__PURE__*/_jsxs(Col,{sm:3,className:\"text-left\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Conditions: \"}),flags]}),/*#__PURE__*/_jsx(Col,{className:\"text-right\",sm:2,children:/*#__PURE__*/_jsx(\"b\",{children:\"Command pattern:\"})}),/*#__PURE__*/_jsx(Col,{className:\"text-left\",sm:4,children:/*#__PURE__*/_jsx(\"pre\",{children:cmdPat})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{sm:2,children:/*#__PURE__*/_jsx(\"b\",{children:\"Parameters\"})}),/*#__PURE__*/_jsx(Col,{sm:1,children:/*#__PURE__*/_jsx(\"b\",{children:\"Required\"})}),/*#__PURE__*/_jsx(Col,{sm:1,children:/*#__PURE__*/_jsx(\"b\",{children:\"Value type\"})}),/*#__PURE__*/_jsx(Col,{sm:1,children:/*#__PURE__*/_jsx(\"b\",{children:\"Units\"})}),/*#__PURE__*/_jsx(Col,{sm:2,children:/*#__PURE__*/_jsx(\"b\",{children:\"Conditions\"})}),/*#__PURE__*/_jsx(Col,{sm:2,children:/*#__PURE__*/_jsx(\"b\",{children:\"Default value\"})})]}),paramElems]});}},{key:\"render\",value:function render(){// const cmdKey = this.props.cmdKey;\n// console.log(\"Command render \" + cmdKey);\nvar vals=this.state.values;var editMode=this.state.editMode;var viewMode=this.state.viewMode;var editLabel=editMode?'Submit':'Edit';var viewLabel=viewMode?'Hide':'Show';var viewPanel=null;var paramKeys=this.props.params.map(function(param){return param.id;});if(viewMode)if(editMode)viewPanel=this.makeCommandEditor(paramKeys);else viewPanel=this.makeCommandViewer(paramKeys);var cmdTypeKey=this.props.cmdTypeKey;var cmdStr=this.props.makeCmd(cmdTypeKey,vals);// check if this command should be flagged for editing\nvar editFlag=false;if(cmdStr.indexOf(\"??\")>-1)editFlag=true;return/*#__PURE__*/_jsxs(Grid,{fluid:true,children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{className:\"text-right\",sm:1,children:/*#__PURE__*/_jsx(Label,{bsSize:\"lg\",bsStyle:\"default\",children:\"Command\"})}),/*#__PURE__*/_jsx(Col,{className:\"text-right\",sm:1,children:/*#__PURE__*/_jsx(\"b\",{children:this.props.name})}),/*#__PURE__*/_jsx(Col,{sm:3,children:/*#__PURE__*/_jsx(FormControl,{readOnly:\"true\",bsSize:\"sm\",type:\"text\",value:cmdStr})}),/*#__PURE__*/_jsx(Col,{sm:2,children:/*#__PURE__*/_jsxs(ButtonToolbar,{children:[/*#__PURE__*/_jsx(Button,{bsSize:\"sm\",bsStyle:\"primary\",onClick:this.edit,children:editLabel}),/*#__PURE__*/_jsx(Button,{bsSize:\"sm\",bsStyle:\"info\",onClick:this.view,children:viewLabel})]})}),this.makeEditFlagElem(editFlag)]}),/*#__PURE__*/_jsx(Panel,{collapsible:true,expanded:viewMode,children:viewPanel})]});}}]);return Command;}(React.Component);export{Command as default};","map":{"version":3,"names":["React","FormControl","Grid","Row","Col","Label","Button","ButtonToolbar","Panel","Glyphicon","Alert","Datetime","Command","props","handleParamChange","idx","e","val","target","value","console","log","newState","Object","assign","state","values","setState","render","preventDefault","handleDatetimeChange","m","time","format","nowDate","Date","setUTCHours","nowStr","toISOString","replace","slice","handleParamSelect","edit","editMode","viewMode","submit","noedit","JSON","stringify","initValues","tran","action","nodeKey","cmdKey","dispatch","delete","msg","hasClonedValue","configKey","cmdMsg","view","dict","dictMode","entry","entryMode","vals","newProps","cmdType","pickClone","updateInitVals","copyClone","cloneVals","cloneValues","cKey","hasOwnProperty","cloneVal","clones","length","valIdx","options","form","bind","type","param","params","justread","ionTimeStr","parts","dparts","tparts","split","UTC","toUTCString","pKey","pIdx","f","show","width","menuFlag","note","valueType","makeFieldForm","makeDatetimeForm","makeShowForm","matchType","indexOf","typeKey","usedNodeKey","makeMenuForm","cloned","getValues","pElem","name","units","opts","myNodeKey","myHostKey","hostKey","paramId","makeOptionElems","makeTypeOptions","makeSelectFormElem","editFlag","paramKeys","commandElems","map","paramKey","makeParamElem","dictLabel","entryLabel","dictPanel","makeDict","entryPanel","makeFileEntry","alert","makeAlertElem","icon","head","unshift","makeReadElem","size","targets","posTag","pName","valType","def","defaultValue","flags","showDefault","opt","optional","lf","cmdLines","makeCmdLines","page","join","lastUpdate","makeParamLine","cmdName","cmdNameStr","toUpperCase","cmdTypeKey","cmdStr","makeCmd","push","pTypeKey","makeParamNote","cmdPat","cmdPattern","cmdTypeObj","multiple","isCloned","order","paramElems","makeParamInfo","editLabel","viewLabel","viewPanel","id","makeCommandEditor","makeCommandViewer","makeEditFlagElem","Component"],"sources":["/Users/rlborgen/git/ionconfig/editor/src/Command.jsx"],"sourcesContent":["//        Command.jsx     Command React Component\n//\n//        Copyright (c) 2018, California Institute of Technology.\n//        ALL RIGHTS RESERVED.  U.S. Government Sponsorship\n//        acknowledged.\n//                                                                   \n//      Author: Rick Borgen, Jet Propulsion Laboratory         \n//                                                               \nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {FormControl} from 'react-bootstrap';\nimport {Grid,Row,Col} from 'react-bootstrap';\nimport {Label,Button,ButtonToolbar} from 'react-bootstrap';\nimport {Panel} from 'react-bootstrap';\nimport {Glyphicon} from 'react-bootstrap';\nimport {Alert} from 'react-bootstrap';\nimport Datetime from 'react-datetime';\nimport 'react-datetime/css/react-datetime.css';\nimport 'moment';\n\nexport default class Command  extends React.Component {\n  constructor (props) {\n    super(props);\n\n    let vals = props.initValues.slice(0);\n    this.state = {\n      editMode: false,\n      viewMode: false,\n      dictMode: false,\n      entryMode: false,\n      cmdMsg: \"\",\n      values: vals\n    };\n    //console.log(\"Command values: \" + this.state.values);\n  }\n  componentWillReceiveProps(newProps) {\n    // only update initVals for commands affected by cloning\n    if (this.props.cmdType.pickClone)\n      //console.log(\"+++ cmdType\" + this.props.name + \" gets pick-cloned\");\n      this.updateInitVals(newProps);\n    if (this.props.cmdType.copyClone)\n      //console.log(\"+++ cmdType\" + this.props.name + \" gets copy-cloned\");\n      this.updateInitVals(newProps);\n    return null;\n  }\n  // new props have come in for a clone-able command\n  updateInitVals(newProps){\n    var newState = Object.assign({},this.state);\n    //console.log(\"updateInitValues = \" + newProps.initValues);\n    newState.values =  newProps.initValues.slice(0);\n    newState.editMode = false;  // a submit must have happened\n    newState.viewMode = false;  // a submit must have happened\n    this.setState (newState);\n    //console.log(\">>>updateInitVals state= \" + JSON.stringify(this.state));\n    return null;\n  }\n  makeAlertElem(msg) {\n    return (<Alert bsStyle=\"danger\"><b>ERROR: {msg}</b></Alert>);\n  }\n  // check if this command owns a value that is cloned\n  hasClonedValue() {\n    const cloneVals = this.props.cloneValues;\n    var cKey = this.props.cmdKey;\n    if (cloneVals.hasOwnProperty(cKey) ) { // is this a clone-able command?\n      var cloneVal = cloneVals[cKey];\n      if (cloneVal.clones.length > 0)      // and a clone exists?\n        return true;\n    };\n    return false;\n  }\n  makeSelectFormElem(valIdx,options) {\n    let value = this.state.values[valIdx];\n    //console.log(\"makeSelectFormElem valIdx= \" + valIdx + \"  value: \" + val);\n    var form =\n      <FormControl\n        readOnly={!this.state.editMode}\n        disabled={!this.state.editMode}\n        bsSize=\"sm\"\n        componentClass=\"select\"\n        value={value}\n        onChange={this.handleParamSelect.bind(null,valIdx)}\n        >{options}\n      </FormControl>;\n    return form;\n  }\n  makeShowForm(idx) {\n    // show current value with selection widget\n    const value = this.state.values[idx];\n    var form =\n      <FormControl\n        readOnly=\"true\"\n        bsSize=\"sm\"\n        type=\"text\"\n        value={value}\n      />;\n    return form;\n  }\n  makeFieldForm(idx,type) {\n    // assume readOnly, unless editable and in editmode\n    //console.log(\"makeFileForm idx = \" + idx + \" type = \" + type);\n    //console.log(\"makeFileForm value = \" + this.state.values[idx]);\n    var param = this.props.params[idx];\n    var justread = !this.state.editMode || param.copyClone;\n    //const cmdKey = this.props.cmdKey;\n    const value = this.state.values[idx];\n    var form =\n      <FormControl\n        readOnly={justread}\n        bsSize=\"sm\"\n        type={type}\n        value={value}\n        spellCheck=\"false\"\n        onChange={this.handleParamChange.bind(null,idx)}\n      />;\n    return form;\n  }\n  makeDatetimeForm(idx) {\n    const ionTimeStr = this.state.values[idx];\n    //  it is recommended practice to parse by hand,  never use Date.parse\n    var time = null;\n\n    if (ionTimeStr === '') {\n       time = new Date();\n       time.setUTCHours(0,0,0);\n    } else {\n      var parts = [], dparts = [], tparts = [];\n      parts = ionTimeStr.split('-');\n      //console.log(\"date parse -- date: \" + parts[0] + \" time: \" + parts[1]);\n      console.log(\"date parse -- parts: \" + JSON.stringify(parts) );\n      dparts = parts[0].split('/');\n      tparts = parts[1].split(':');\n      time = new Date( Date.UTC(dparts[0],dparts[1]-1,dparts[2],tparts[0],tparts[1],tparts[2]) );\n      console.log(\"date parse: \" + JSON.stringify(dparts) + ' ' + JSON.stringify(tparts) );\n    } \n    console.log('makeDatetime  ionTime= '+ ionTimeStr + \" Date= \" + time.toUTCString() );\n    // NOTE: this is an UN-controlled component (no value provided)\n    //   which avoids messy issues mid-edit\n    var form =\n      <Datetime\n        defaultValue={time}\n        utc={true}\n        dateFormat=\"YYYY/MM/DD\"\n        timeFormat=\"HH:mm:ss\"\n        onChange={this.handleDatetimeChange.bind(null,idx)}\n      />;\n    return form;\n  }\n  makeParamElem(pKey,pIdx) {\n    const param = this.props.params[pIdx];\n    //console.log(\"Command-makeParamElem valueType = \" + param.valueType + \" idx =\" + pIdx);\n    let f = null;\n    let show = null;\n    let width = 3;\n    let menuFlag = false;        // assume standard form, not menu\n    let note = \"from all nodes\"  // note used with dynamic menus\n    if (param.valueType === \"number\") { \n      f = this.makeFieldForm(pIdx,\"number\");\n      width = 1;\n    } else \n    if (param.valueType === \"text\") { \n      f = this.makeFieldForm(pIdx,\"text\");\n      width = 2;\n    } else\n    if (param.valueType === \"datetime\") {\n      f = this.makeDatetimeForm(pIdx);\n      width = 2;\n    } else \n    if (param.copyClone) { \n      f = this.makeShowForm(pIdx);\n      width = 1;\n    } else {  // must be menu type\n      show = this.makeShowForm(pIdx);\n      // infer match type based on valueType\n      let matchType = \"all\";   // assume matching all, at first\n      if (param.valueType.indexOf(\"select\") >= 0) {  //no note needed for simple select\n        note = \"\";\n      } else\n      if (param.valueType.indexOf(\"nodeNum\") >= 0) { // nodes should be external\n        if (param.typeKey.indexOf(\"ovrd\") >= 0) {             // except for override commands (ipn)\n          matchType = \"all\"\n        } else\n        if (this.props.usedNodeKey(this.props.nodeKey)) { // if this nodeKey is \"real\",need to exclude\n          matchType =\"exclude\";                           // but for contacts,  nodeKey is artificial\n          note = \"from other nodes only\";\n        };\n      } else \n      if (param.valueType.indexOf(\"ipAddr\") >= 0) { // ipAddrs should be local\n        matchType =\"match\"; \n        note = \"from this host only\";\n      } else \n      if (param.valueType.indexOf(\"Induct\")   >= 0    // inducts should be external\n       || param.valueType.indexOf(\"Link\")     >= 0    // links should be external\n       || param.valueType.indexOf(\"Endpoint\") >= 0) { // endpoints should be external\n        matchType =\"exclude\";\n        note = \"from other nodes only\";\n      } else \n      if (param.valueType.indexOf(\"Outduct\") >= 0) { // outducts should be local\n        matchType =\"match\";\n        note = \"from this node only\";\n      };\n      f = this.makeMenuForm(param,pIdx,matchType);\n      menuFlag = true;\n    };\n    var justread = !(this.state.editMode && !param.cloned);\n    const cmdKey = this.props.cmdKey;\n    const values = this.props.getValues(cmdKey);\n    const value = values[pIdx];\n    var pElem = null;\n    if (note !== \"\")\n      note = '(' + note + ')';\n    if (menuFlag) {\n      pElem =\n        <Row key={pIdx}>\n          <Col className=\"text-right\" sm={3}><b>{param.name}</b></Col>\n          <Col sm={2} value={value}>{show}</Col>\n          <Col sm={2} type={param.type} value={value} readOnly={justread}>\n            {f}\n          </Col>\n          <Col sm={2}>{note}</Col>\n        </Row>\n    } else {    // standard form control\n      pElem = \n        <Row key={pIdx}>\n          <Col className=\"text-right\" sm={3}><b>{param.name}</b></Col>\n          <Col sm={width} type={param.type} value={value} readOnly={justread}>\n            {f}\n          </Col>\n          <Col sm={2}>{param.units}</Col>\n        </Row>\n    };\n    return pElem;\n  }\n\n  makeMenuForm(param,pIdx,matchType) {\n    let f = null;\n    let opts = null;\n    let myNodeKey = this.props.nodeKey;   // send the local node to filter needed values\n    let myHostKey = this.props.hostKey;   // unless using the hostKey instead!\n\n    if (param.valueType === \"select\") {\n      console.log(\"+++select detected\");\n      var paramId = param.typeKey;\n      opts = this.props.makeOptionElems(paramId);\n    } else\n    if (param.valueType === \"ipAddr\") {\n      console.log(\"+++ ipAddr pick detected!\");\n      opts = this.props.makeTypeOptions(param.valueType,myHostKey,matchType);\n    } else\n    if (param.pickClone) {\n      console.log(\"+++\" + param.valueType + \" pick detected!\");\n      opts = this.props.makeTypeOptions(param.valueType,myNodeKey,matchType);\n    };\n    f = this.makeSelectFormElem(pIdx,opts);\n    return f;\n  }\n\n  makeEditFlagElem(editFlag) {\n    if (editFlag) {\n      return (\n        <Col sm={1}>\n            <Button bsSize=\"sm\" bsStyle=\"danger\">??</Button>\n        </Col>\n      );\n    }\n    return \"\";\n  }\n  makeCommandEditor(paramKeys) {\n    var commandElems = paramKeys.map( (paramKey,idx) => {\n      return this.makeParamElem(paramKey,idx) \n    } );\n    const dictMode = this.state.dictMode;\n    const entryMode = this.state.entryMode;\n    const dictLabel = dictMode?  'Hide Dictionary' :'Show Dictionary' \n    const entryLabel = entryMode?  'Hide File Entry' :'Show File Entry' \n    let dictPanel = null;\n    if (dictMode)\n      dictPanel = this.makeDict();\n    let entryPanel = null;\n    if (entryMode)\n      entryPanel = this.makeFileEntry();\n            // check for alert\n    let msg = this.state.cmdMsg;\n    var alert = (msg === \"\")?  \"\" : this.makeAlertElem(msg);\n\n    const icon = 'remove';\n    const head  =\n      <Row key=\"head\">\n        <Col sm={5}> <Label bsSize=\"lg\" bsStyle=\"default\">Command Editor</Label></Col>\n        <Col sm={4}>\n          <ButtonToolbar>\n            <Button bsSize=\"sm\" bsStyle=\"info\" onClick={this.dict}>{dictLabel}</Button>\n            <Button bsSize=\"sm\" bsStyle=\"info\" onClick={this.entry}>{entryLabel}</Button>\n            <Button bsSize=\"sm\" bsStyle=\"danger\" onClick={this.delete}>Delete</Button>\n            <Button bsSize=\"sm\" bsStyle=\"success\"  onClick={this.noedit}><Glyphicon glyph={icon} /></Button>\n          </ButtonToolbar>\n        </Col>\n        <Col sm={4}>{alert}</Col>\n      </Row>;\n    commandElems.unshift(head);\n    return (\n      <div>\n        {commandElems}\n        <Panel collapsible expanded={dictMode}>{dictPanel}</Panel>\n        <Panel collapsible expanded={entryMode}>{entryPanel}</Panel>\n      </div>);\n  }\n  makeCommandViewer(paramKeys) {\n    var commandElems = paramKeys.map( (paramKey,idx) => {\n      return this.makeReadElem(paramKey,idx) \n    } );\n    const dictMode = this.state.dictMode;\n    const entryMode = this.state.entryMode;\n    const dictLabel = dictMode?  'Hide Dictionary' :'Show Dictionary' \n    const entryLabel = entryMode?  'Hide File Entry' :'Show File Entry' \n    let dictPanel = null;\n    if (dictMode)\n      dictPanel = this.makeDict();\n    let entryPanel = null;\n    if (entryMode)\n      entryPanel = this.makeFileEntry();\n    const head  =\n      <Row key=\"head\">\n        <Col sm={5}><Label bsSize=\"lg\" bsStyle=\"default\">Command Viewer</Label></Col>\n        <Col sm={3}>\n          <ButtonToolbar>\n            <Button bsSize=\"sm\" bsStyle=\"info\" onClick={this.dict}>{dictLabel}</Button>\n            <Button bsSize=\"sm\" bsStyle=\"info\" onClick={this.entry}>{entryLabel}</Button>\n          </ButtonToolbar>\n        </Col>\n      </Row>;\n    commandElems.unshift(head);\n    return (\n      <div>\n        {commandElems}\n        <Panel collapsible expanded={dictMode}>{dictPanel}</Panel>\n        <Panel collapsible expanded={entryMode}>{entryPanel}</Panel>\n      </div>);\n  }\n  makeReadElem(paramKey,pIdx) {\n    //console.log(\">>MakeNodeElem \" + prop + ' ' + type + ' ' + val + ' ' + size);\n    const param  = this.props.params[pIdx];\n    const cmdKey = this.props.cmdKey;\n    const values = this.props.getValues(cmdKey);\n    const val    = values[pIdx];\n    const name   = param.name;\n    var   size   = 2;\n    if (param.valueType === \"number\")\n      size = 1;\n    const form =\n        <FormControl readOnly=\"true\" bsSize=\"sm\" type=\"text\" value={val}/>;\n    return (\n      <Row key={name}>\n        <Col className=\"text-right\" sm={3}><b>{name}</b></Col>\n        <Col sm={size} value={val}>{form}</Col>\n        <Col sm={2}>{param.units}</Col>\n      </Row>\n    );\n  };\n  makeParamInfo(param, pIdx) {\n    //console.log(\"makeParamInfo idx= \" + pIdx + \" param=\" + JSON.stringify(param) );\n    const targets = [\"[1]\",\"[2]\",\"[3]\",\"[4]\",\"[5]\",\"[6]\",\"[7]\",\"[8]\"];\n    const posTag = targets[pIdx];\n    const pName = param.name;\n    const valType = param.valueType;\n    var def = param.defaultValue;\n    if (def === '')\n      def = '[none]';\n    var units = param.units;\n    if (units === '')\n      units = '[none]';\n    var flags = \"\";\n    if (param.showDefault)\n      flags += \" showDefault\";\n    if (param.copyClone)\n      flags += \" copyClone\";\n    if (param.pickClone)\n      flags += \" pickClone\";\n    if (flags === '')\n      flags = '[none]';\n    let opt = \"required\";\n    if (param.optional) { opt = \"optional\"; } \n\n    return (\n      <Row key={pIdx}>\n        <Col sm={2}>{posTag} {pName}</Col>\n        <Col sm={1}>{opt}</Col>\n        <Col sm={1}>{valType}</Col>\n        <Col sm={1}>{units}</Col>\n        <Col sm={2}>{flags}</Col>\n        <Col sm={2}>{def}</Col>\n        <Col sm={3}></Col>\n      </Row>\n    );\n  }\n  makeFileEntry() {\n    var lf = \"\\n\";   // assign linefeed format for text files\n    const cmdLines = this.makeCmdLines();\n    const page = cmdLines.join(lf) + lf;\n    return (\n      <div>\n        <Row>\n          <Col sm={4}><Label bsStyle=\"default\">Command File Entry</Label></Col>\n          <Col className=\"text-left\" sm={3}>\n             <b>Last updated: </b>{this.props.lastUpdate}\n          </Col>\n        </Row>\n        <pre>{page}</pre>\n      </div>\n      );\n  }\n  makeCmdLines(){\n    var cmdLines = this.props.params.map( (param, idx) => {\n      return this.makeParamLine(param,idx);\n    } );\n    const cmdName = this.props.cmdType.name;\n    var cmdNameStr = \"#  \" + cmdName.toUpperCase();\n    cmdLines.unshift(cmdNameStr);\n    const cmdTypeKey = this.props.cmdTypeKey;\n    const cmdKey = this.props.cmdKey;\n    const vals = this.props.getValues(cmdKey);\n    const cmdStr = this.props.makeCmd(cmdTypeKey,vals);\n    cmdLines.push(cmdStr);\n    return cmdLines;\n  }\n  makeParamLine(param,pIdx) {\n    const pTypeKey = param.typeKey;\n    const cmdKey = this.props.cmdKey;\n    const values = this.props.getValues(cmdKey);\n    const val = values[pIdx];\n    const note = this.props.makeParamNote(pTypeKey,pIdx,val);\n    return note;\n  }\n  makeDict() { \n    console.log(\"$$$ makeDictionary\");\n    var cmdTypeKey = this.props.cmdTypeKey;\n    var cmdPat = this.props.cmdPattern;\n    const cmdTypeObj = this.props.cmdType;\n    var flags = \"\";\n    if (cmdTypeObj.multiple)\n      flags += \" multiple\";\n    else\n      flags += \" singleton\";\n    if (cmdTypeObj.copyClone)\n      flags += \", copyClone\";\n    if (cmdTypeObj.isCloned)\n      flags += \", isCloned\";\n    var order = cmdTypeObj.order\n    var paramElems = this.props.params.map( (param, idx) => {\n      return this.makeParamInfo(param,idx);\n    } );\n    return (\n      <div>\n        <Row>\n          <Col sm={1} className=\"text-left\"><Label bsStyle=\"default\">Command Dictionary</Label></Col>\n        </Row>\n        <Row>\n          <Col sm={2} className=\"text-left\"><b>{cmdTypeKey}</b></Col>\n          <Col sm={1} className=\"text-left\"><b>Order: </b>{order}</Col>\n          <Col sm={3} className=\"text-left\"><b>Conditions: </b>{flags}</Col>\n          <Col className=\"text-right\" sm={2}><b>Command pattern:</b></Col>\n          <Col className=\"text-left\"  sm={4}><pre>{cmdPat}</pre></Col> \n        </Row>\n        <Row>\n          <Col sm={2}><b>Parameters</b></Col>\n          <Col sm={1}><b>Required</b></Col>\n          <Col sm={1}><b>Value type</b></Col>\n          <Col sm={1}><b>Units</b></Col>\n          <Col sm={2}><b>Conditions</b></Col>\n          <Col sm={2}><b>Default value</b></Col>\n        </Row>\n        {paramElems}\n      </div>\n      );\n  }\n    \n  render() {\n    // const cmdKey = this.props.cmdKey;\n    // console.log(\"Command render \" + cmdKey);\n    var vals = this.state.values;\n\n    const editMode = this.state.editMode;\n    const viewMode = this.state.viewMode;\n\n    const editLabel = editMode?  'Submit' : 'Edit'\n    const viewLabel = viewMode?  'Hide' : 'Show'\n\n    let viewPanel = null;\n    const paramKeys = this.props.params.map(param => {return param.id});\n    if (viewMode)\n      if (editMode)\n        viewPanel = this.makeCommandEditor(paramKeys);\n      else\n        viewPanel = this.makeCommandViewer(paramKeys);\n\n    const cmdTypeKey = this.props.cmdTypeKey;\n    var cmdStr = this.props.makeCmd(cmdTypeKey,vals);\n        // check if this command should be flagged for editing\n    var editFlag = false;\n    if (cmdStr.indexOf(\"??\") > -1)\n      editFlag = true;  \n\n    return (\n      <Grid fluid>\n        <Row>\n          <Col className=\"text-right\" sm={1}><Label bsSize=\"lg\" bsStyle=\"default\">Command</Label></Col>\n          <Col className=\"text-right\" sm={1}><b>{this.props.name}</b></Col>\n          <Col sm={3}> \n            <FormControl readOnly=\"true\" bsSize=\"sm\" type=\"text\" value={cmdStr} />\n          </Col>\n          <Col sm={2}>\n            <ButtonToolbar>\n              <Button bsSize=\"sm\" bsStyle=\"primary\" onClick={this.edit}>{editLabel}</Button>\n              <Button bsSize=\"sm\" bsStyle=\"info\" onClick={this.view}>{viewLabel}</Button>\n            </ButtonToolbar>\n          </Col>\n          {this.makeEditFlagElem(editFlag)}\n        </Row>\n        <Panel collapsible expanded={viewMode}>\n         {viewPanel}\n        </Panel>\n      </Grid>\n    )\n  };\n  // handles value changes for a child parameter\n  handleParamChange = (idx,e) => {\n    const val = e.target.value;\n    console.log(\">>> param change!\" + e + \" idx = \" + idx + \" value= \" + val);\n    var newState = Object.assign({},this.state);\n    console.log(\">>> param old value = \" + newState.values[idx]);\n    newState.values[idx] = val;\n    this.setState (newState);\n    this.render();\n    e.preventDefault();\n  };\n  handleDatetimeChange =(idx,m) => {\n    console.log(\">>>handleDatetimeChange  m: \" + typeof m);\n    let time = null;\n    //    if (typeof m !== \"undefined\") {\n    if (typeof m === \"object\") {\n      time = m.format('YYYY/MM/DD-HH:mm:ss');\n      console.log(\">>> datetime change! idx= \" + idx + \" time= \" + time);\n    }\n    else {\n      let nowDate= new Date();\n      nowDate.setUTCHours(0,0,0);\n      let nowStr = nowDate.toISOString();\n      nowStr = nowStr.replace('T','?');\n      time = nowStr.slice(0,19);\n      console.log(\">>> datetime nulled! idx= \" + idx + \" time= \" + time);\n    }\n    var newState = Object.assign({},this.state);\n    console.log(\">>> param old value = \" + newState.values[idx] + \"  new value = \" + time);\n    newState.values[idx] = time;\n    this.setState (newState);\n    this.render();\n  };\n  handleParamSelect = (idx,e) => {\n    const val = e.target.value;\n    console.log(\">>> param selection!\" + e + \" idx = \" + idx + \" value= \" + val);\n    var newState = Object.assign({},this.state);\n    console.log(\">>> param old value = \" + newState.values[idx]);\n    newState.values[idx] = val;\n    this.setState (newState);\n    this.render();\n    e.preventDefault();\n  };\n  edit = () => {   // activated by Edit/Submit button\n    var newState = Object.assign({},this.state);\n    const editMode = this.state.editMode;\n    if (editMode) {\n      console.log(\"let's submit!\");\n      newState.viewMode = false;     // force viewing\n    }  else {\n      console.log(\"let's edit!\");\n      newState.viewMode = true;     // force viewing\n    }\n    newState.editMode = !editMode;  // toggle mode\n    this.setState (newState);\n    if (editMode)\n      this.submit();\n  };\n  noedit = () => {   // activated by Cancel button\n    var newState = Object.assign({},this.state);\n    newState.editMode = false;   // cancel editing\n    newState.viewMode = false;   // cancel viewing\n    this.setState (newState);\n  };\n  submit = () => { // callable by edit (above)\n    console.log(\"submit updates!  initValues:\" + JSON.stringify(this.props.initValues));\n    var tran = {\n      action: \"UPDATE-COMMAND\",\n      nodeKey: this.props.nodeKey,\n      cmdKey: this.props.cmdKey,\n      values: this.state.values,\n      initValues: this.props.initValues\n    };\n    this.props.dispatch(tran);\n  };\n  delete = () => { \n    console.log(\"submit delete!  cmdKey:\" + this.props.cmdKey);\n    var msg = \"\";  // no error, no msg\n    if (this.hasClonedValue()) {\n      msg = \"Cannot delete while command value is cloned.  See clones survey.\";\n      console.log(msg);\n    } else\n      console.log(\"Command value is NOT Cloned.\");\n    if (msg === \"\") {  // all good!\n      var tran = {\n        action: \"DELETE-COMMAND\",\n        nodeKey: this.props.nodeKey,\n        configKey: this.props.configKey,\n        cmdKey: this.props.cmdKey\n      };\n      this.props.dispatch(tran);\n    } else {\n      console.log(\"Delete rejected.\");\n      this.setState({\n        cmdMsg: msg\n      });\n    }\n  };\n  view = () => { // activated by view/hide button\n    var newState = Object.assign({},this.state);\n    const viewMode = this.state.viewMode;\n    if (viewMode)\n      console.log(\"let's hide view panel!\");\n    else\n      console.log(\"let's show view panel!\");\n    newState.viewMode = !viewMode;\n    this.setState (newState);\n  };\n  dict = () => {\n    var newState = Object.assign({},this.state);\n    const dictMode = this.state.dictMode;\n    if (dictMode)\n      console.log(\"let's hide dictionary panel!\");\n    else\n      console.log(\"let's show dictionary panel!\");\n    newState.dictMode = !dictMode;\n    this.setState (newState);\n  };\n  entry = () => {\n    var newState = Object.assign({},this.state);\n    const entryMode = this.state.entryMode;\n    if (entryMode)\n      console.log(\"let's hide file entry panel!\");\n    else\n      console.log(\"let's show file entry panel!\");\n    newState.entryMode = !entryMode;\n    this.setState (newState);\n  };\n}\n\nCommand.propTypes = {\n  cmdKey: PropTypes.string.isRequired,     // user model - cmd key\n  nodeKey: PropTypes.string.isRequired,    // user model - node key\n  hostKey: PropTypes.string.isRequired,    // user model - host key\n  configKey: PropTypes.string.isRequired,  // user model - config key\n  cmdTypeKey: PropTypes.string.isRequired,\n  cmdType: PropTypes.object.isRequired,    // schema\n  cmdPattern: PropTypes.string.isRequired, // schema\n  initValues:  PropTypes.Arrays.isRequired,\n  cloneValues: PropTypes.Arrays.isRequired,   \n\n  makeCmd: PropTypes.func.isRequired,\n  getValues: PropTypes.func.isRequired,\n  usedNodeKey: PropTypes.func.isRequired,\n  makeTypeOptions: PropTypes.func.isRequired,\n  makeOptionElems: PropTypes.func.isRequired,\n  getOptionText: PropTypes.func.isRequired,\n  makeParamNote: PropTypes.func.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  lastUpdate: PropTypes.string.isRequired,\n  params: PropTypes.array.isRequired,\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}