{"ast":null,"code":"/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule ReactCompositeComponent\n */\n'use strict';\n\nvar ReactComponentEnvironment = require('./ReactComponentEnvironment');\n\nvar ReactCurrentOwner = require('./ReactCurrentOwner');\n\nvar ReactElement = require('./ReactElement');\n\nvar ReactInstanceMap = require('./ReactInstanceMap');\n\nvar ReactPerf = require('./ReactPerf');\n\nvar ReactPropTypeLocations = require('./ReactPropTypeLocations');\n\nvar ReactPropTypeLocationNames = require('./ReactPropTypeLocationNames');\n\nvar ReactReconciler = require('./ReactReconciler');\n\nvar ReactUpdateQueue = require('./ReactUpdateQueue');\n\nvar assign = require('./Object.assign');\n\nvar emptyObject = require('fbjs/lib/emptyObject');\n\nvar invariant = require('fbjs/lib/invariant');\n\nvar shouldUpdateReactComponent = require('./shouldUpdateReactComponent');\n\nvar warning = require('fbjs/lib/warning');\n\nfunction getDeclarationErrorAddendum(component) {\n  var owner = component._currentElement._owner || null;\n\n  if (owner) {\n    var name = owner.getName();\n\n    if (name) {\n      return ' Check the render method of `' + name + '`.';\n    }\n  }\n\n  return '';\n}\n\nfunction StatelessComponent(Component) {}\n\nStatelessComponent.prototype.render = function () {\n  var Component = ReactInstanceMap.get(this)._currentElement.type;\n\n  return Component(this.props, this.context, this.updater);\n};\n/**\n * ------------------ The Life-Cycle of a Composite Component ------------------\n *\n * - constructor: Initialization of state. The instance is now retained.\n *   - componentWillMount\n *   - render\n *   - [children's constructors]\n *     - [children's componentWillMount and render]\n *     - [children's componentDidMount]\n *     - componentDidMount\n *\n *       Update Phases:\n *       - componentWillReceiveProps (only called if parent updated)\n *       - shouldComponentUpdate\n *         - componentWillUpdate\n *           - render\n *           - [children's constructors or receive props phases]\n *         - componentDidUpdate\n *\n *     - componentWillUnmount\n *     - [children's componentWillUnmount]\n *   - [children destroyed]\n * - (destroyed): The instance is now blank, released by React and ready for GC.\n *\n * -----------------------------------------------------------------------------\n */\n\n/**\n * An incrementing ID assigned to each component when it is mounted. This is\n * used to enforce the order in which `ReactUpdates` updates dirty components.\n *\n * @private\n */\n\n\nvar nextMountID = 1;\n/**\n * @lends {ReactCompositeComponent.prototype}\n */\n\nvar ReactCompositeComponentMixin = {\n  /**\n   * Base constructor for all composite component.\n   *\n   * @param {ReactElement} element\n   * @final\n   * @internal\n   */\n  construct: function construct(element) {\n    this._currentElement = element;\n    this._rootNodeID = null;\n    this._instance = null; // See ReactUpdateQueue\n\n    this._pendingElement = null;\n    this._pendingStateQueue = null;\n    this._pendingReplaceState = false;\n    this._pendingForceUpdate = false;\n    this._renderedComponent = null;\n    this._context = null;\n    this._mountOrder = 0;\n    this._topLevelWrapper = null; // See ReactUpdates and ReactUpdateQueue.\n\n    this._pendingCallbacks = null;\n  },\n\n  /**\n   * Initializes the component, renders markup, and registers event listeners.\n   *\n   * @param {string} rootID DOM ID of the root node.\n   * @param {ReactReconcileTransaction|ReactServerRenderingTransaction} transaction\n   * @return {?string} Rendered markup to be inserted into the DOM.\n   * @final\n   * @internal\n   */\n  mountComponent: function mountComponent(rootID, transaction, context) {\n    this._context = context;\n    this._mountOrder = nextMountID++;\n    this._rootNodeID = rootID;\n\n    var publicProps = this._processProps(this._currentElement.props);\n\n    var publicContext = this._processContext(context);\n\n    var Component = this._currentElement.type; // Initialize the public class\n\n    var inst;\n    var renderedElement; // This is a way to detect if Component is a stateless arrow function\n    // component, which is not newable. It might not be 100% reliable but is\n    // something we can do until we start detecting that Component extends\n    // React.Component. We already assume that typeof Component === 'function'.\n\n    var canInstantiate = ('prototype' in Component);\n\n    if (canInstantiate) {\n      if (process.env.NODE_ENV !== 'production') {\n        ReactCurrentOwner.current = this;\n\n        try {\n          inst = new Component(publicProps, publicContext, ReactUpdateQueue);\n        } finally {\n          ReactCurrentOwner.current = null;\n        }\n      } else {\n        inst = new Component(publicProps, publicContext, ReactUpdateQueue);\n      }\n    }\n\n    if (!canInstantiate || inst === null || inst === false || ReactElement.isValidElement(inst)) {\n      renderedElement = inst;\n      inst = new StatelessComponent(Component);\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      // This will throw later in _renderValidatedComponent, but add an early\n      // warning now to help debugging\n      if (inst.render == null) {\n        process.env.NODE_ENV !== 'production' ? warning(false, '%s(...): No `render` method found on the returned component ' + 'instance: you may have forgotten to define `render`, returned ' + 'null/false from a stateless component, or tried to render an ' + 'element whose type is a function that isn\\'t a React component.', Component.displayName || Component.name || 'Component') : undefined;\n      } else {\n        // We support ES6 inheriting from React.Component, the module pattern,\n        // and stateless components, but not ES6 classes that don't extend\n        process.env.NODE_ENV !== 'production' ? warning(Component.prototype && Component.prototype.isReactComponent || !canInstantiate || !(inst instanceof Component), '%s(...): React component classes must extend React.Component.', Component.displayName || Component.name || 'Component') : undefined;\n      }\n    } // These should be set up in the constructor, but as a convenience for\n    // simpler class abstractions, we set them up after the fact.\n\n\n    inst.props = publicProps;\n    inst.context = publicContext;\n    inst.refs = emptyObject;\n    inst.updater = ReactUpdateQueue;\n    this._instance = inst; // Store a reference from the instance back to the internal representation\n\n    ReactInstanceMap.set(inst, this);\n\n    if (process.env.NODE_ENV !== 'production') {\n      // Since plain JS classes are defined without any special initialization\n      // logic, we can not catch common errors early. Therefore, we have to\n      // catch them here, at initialization time, instead.\n      process.env.NODE_ENV !== 'production' ? warning(!inst.getInitialState || inst.getInitialState.isReactClassApproved, 'getInitialState was defined on %s, a plain JavaScript class. ' + 'This is only supported for classes created using React.createClass. ' + 'Did you mean to define a state property instead?', this.getName() || 'a component') : undefined;\n      process.env.NODE_ENV !== 'production' ? warning(!inst.getDefaultProps || inst.getDefaultProps.isReactClassApproved, 'getDefaultProps was defined on %s, a plain JavaScript class. ' + 'This is only supported for classes created using React.createClass. ' + 'Use a static property to define defaultProps instead.', this.getName() || 'a component') : undefined;\n      process.env.NODE_ENV !== 'production' ? warning(!inst.propTypes, 'propTypes was defined as an instance property on %s. Use a static ' + 'property to define propTypes instead.', this.getName() || 'a component') : undefined;\n      process.env.NODE_ENV !== 'production' ? warning(!inst.contextTypes, 'contextTypes was defined as an instance property on %s. Use a ' + 'static property to define contextTypes instead.', this.getName() || 'a component') : undefined;\n      process.env.NODE_ENV !== 'production' ? warning(typeof inst.componentShouldUpdate !== 'function', '%s has a method called ' + 'componentShouldUpdate(). Did you mean shouldComponentUpdate()? ' + 'The name is phrased as a question because the function is ' + 'expected to return a value.', this.getName() || 'A component') : undefined;\n      process.env.NODE_ENV !== 'production' ? warning(typeof inst.componentDidUnmount !== 'function', '%s has a method called ' + 'componentDidUnmount(). But there is no such lifecycle method. ' + 'Did you mean componentWillUnmount()?', this.getName() || 'A component') : undefined;\n      process.env.NODE_ENV !== 'production' ? warning(typeof inst.componentWillRecieveProps !== 'function', '%s has a method called ' + 'componentWillRecieveProps(). Did you mean componentWillReceiveProps()?', this.getName() || 'A component') : undefined;\n    }\n\n    var initialState = inst.state;\n\n    if (initialState === undefined) {\n      inst.state = initialState = null;\n    }\n\n    !(typeof initialState === 'object' && !Array.isArray(initialState)) ? process.env.NODE_ENV !== 'production' ? invariant(false, '%s.state: must be set to an object or null', this.getName() || 'ReactCompositeComponent') : invariant(false) : undefined;\n    this._pendingStateQueue = null;\n    this._pendingReplaceState = false;\n    this._pendingForceUpdate = false;\n\n    if (inst.componentWillMount) {\n      inst.componentWillMount(); // When mounting, calls to `setState` by `componentWillMount` will set\n      // `this._pendingStateQueue` without triggering a re-render.\n\n      if (this._pendingStateQueue) {\n        inst.state = this._processPendingState(inst.props, inst.context);\n      }\n    } // If not a stateless component, we now render\n\n\n    if (renderedElement === undefined) {\n      renderedElement = this._renderValidatedComponent();\n    }\n\n    this._renderedComponent = this._instantiateReactComponent(renderedElement);\n    var markup = ReactReconciler.mountComponent(this._renderedComponent, rootID, transaction, this._processChildContext(context));\n\n    if (inst.componentDidMount) {\n      transaction.getReactMountReady().enqueue(inst.componentDidMount, inst);\n    }\n\n    return markup;\n  },\n\n  /**\n   * Releases any resources allocated by `mountComponent`.\n   *\n   * @final\n   * @internal\n   */\n  unmountComponent: function unmountComponent() {\n    var inst = this._instance;\n\n    if (inst.componentWillUnmount) {\n      inst.componentWillUnmount();\n    }\n\n    ReactReconciler.unmountComponent(this._renderedComponent);\n    this._renderedComponent = null;\n    this._instance = null; // Reset pending fields\n    // Even if this component is scheduled for another update in ReactUpdates,\n    // it would still be ignored because these fields are reset.\n\n    this._pendingStateQueue = null;\n    this._pendingReplaceState = false;\n    this._pendingForceUpdate = false;\n    this._pendingCallbacks = null;\n    this._pendingElement = null; // These fields do not really need to be reset since this object is no\n    // longer accessible.\n\n    this._context = null;\n    this._rootNodeID = null;\n    this._topLevelWrapper = null; // Delete the reference from the instance to this internal representation\n    // which allow the internals to be properly cleaned up even if the user\n    // leaks a reference to the public instance.\n\n    ReactInstanceMap.remove(inst); // Some existing components rely on inst.props even after they've been\n    // destroyed (in event handlers).\n    // TODO: inst.props = null;\n    // TODO: inst.state = null;\n    // TODO: inst.context = null;\n  },\n\n  /**\n   * Filters the context object to only contain keys specified in\n   * `contextTypes`\n   *\n   * @param {object} context\n   * @return {?object}\n   * @private\n   */\n  _maskContext: function _maskContext(context) {\n    var maskedContext = null;\n    var Component = this._currentElement.type;\n    var contextTypes = Component.contextTypes;\n\n    if (!contextTypes) {\n      return emptyObject;\n    }\n\n    maskedContext = {};\n\n    for (var contextName in contextTypes) {\n      maskedContext[contextName] = context[contextName];\n    }\n\n    return maskedContext;\n  },\n\n  /**\n   * Filters the context object to only contain keys specified in\n   * `contextTypes`, and asserts that they are valid.\n   *\n   * @param {object} context\n   * @return {?object}\n   * @private\n   */\n  _processContext: function _processContext(context) {\n    var maskedContext = this._maskContext(context);\n\n    if (process.env.NODE_ENV !== 'production') {\n      var Component = this._currentElement.type;\n\n      if (Component.contextTypes) {\n        this._checkPropTypes(Component.contextTypes, maskedContext, ReactPropTypeLocations.context);\n      }\n    }\n\n    return maskedContext;\n  },\n\n  /**\n   * @param {object} currentContext\n   * @return {object}\n   * @private\n   */\n  _processChildContext: function _processChildContext(currentContext) {\n    var Component = this._currentElement.type;\n    var inst = this._instance;\n    var childContext = inst.getChildContext && inst.getChildContext();\n\n    if (childContext) {\n      !(typeof Component.childContextTypes === 'object') ? process.env.NODE_ENV !== 'production' ? invariant(false, '%s.getChildContext(): childContextTypes must be defined in order to ' + 'use getChildContext().', this.getName() || 'ReactCompositeComponent') : invariant(false) : undefined;\n\n      if (process.env.NODE_ENV !== 'production') {\n        this._checkPropTypes(Component.childContextTypes, childContext, ReactPropTypeLocations.childContext);\n      }\n\n      for (var name in childContext) {\n        !(name in Component.childContextTypes) ? process.env.NODE_ENV !== 'production' ? invariant(false, '%s.getChildContext(): key \"%s\" is not defined in childContextTypes.', this.getName() || 'ReactCompositeComponent', name) : invariant(false) : undefined;\n      }\n\n      return assign({}, currentContext, childContext);\n    }\n\n    return currentContext;\n  },\n\n  /**\n   * Processes props by setting default values for unspecified props and\n   * asserting that the props are valid. Does not mutate its argument; returns\n   * a new props object with defaults merged in.\n   *\n   * @param {object} newProps\n   * @return {object}\n   * @private\n   */\n  _processProps: function _processProps(newProps) {\n    if (process.env.NODE_ENV !== 'production') {\n      var Component = this._currentElement.type;\n\n      if (Component.propTypes) {\n        this._checkPropTypes(Component.propTypes, newProps, ReactPropTypeLocations.prop);\n      }\n    }\n\n    return newProps;\n  },\n\n  /**\n   * Assert that the props are valid\n   *\n   * @param {object} propTypes Map of prop name to a ReactPropType\n   * @param {object} props\n   * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n   * @private\n   */\n  _checkPropTypes: function _checkPropTypes(propTypes, props, location) {\n    // TODO: Stop validating prop types here and only use the element\n    // validation.\n    var componentName = this.getName();\n\n    for (var propName in propTypes) {\n      if (propTypes.hasOwnProperty(propName)) {\n        var error;\n\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          !(typeof propTypes[propName] === 'function') ? process.env.NODE_ENV !== 'production' ? invariant(false, '%s: %s type `%s` is invalid; it must be a function, usually ' + 'from React.PropTypes.', componentName || 'React class', ReactPropTypeLocationNames[location], propName) : invariant(false) : undefined;\n          error = propTypes[propName](props, propName, componentName, location, null, 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED');\n        } catch (ex) {\n          error = ex;\n        }\n\n        if (error instanceof Error) {\n          // We may want to extend this logic for similar errors in\n          // top-level render calls, so I'm abstracting it away into\n          // a function to minimize refactoring in the future\n          var addendum = getDeclarationErrorAddendum(this);\n\n          if (location === ReactPropTypeLocations.prop) {\n            // Preface gives us something to blacklist in warning module\n            process.env.NODE_ENV !== 'production' ? warning(false, 'Failed Composite propType: %s%s', error.message, addendum) : undefined;\n          } else {\n            process.env.NODE_ENV !== 'production' ? warning(false, 'Failed Context Types: %s%s', error.message, addendum) : undefined;\n          }\n        }\n      }\n    }\n  },\n  receiveComponent: function receiveComponent(nextElement, transaction, nextContext) {\n    var prevElement = this._currentElement;\n    var prevContext = this._context;\n    this._pendingElement = null;\n    this.updateComponent(transaction, prevElement, nextElement, prevContext, nextContext);\n  },\n\n  /**\n   * If any of `_pendingElement`, `_pendingStateQueue`, or `_pendingForceUpdate`\n   * is set, update the component.\n   *\n   * @param {ReactReconcileTransaction} transaction\n   * @internal\n   */\n  performUpdateIfNecessary: function performUpdateIfNecessary(transaction) {\n    if (this._pendingElement != null) {\n      ReactReconciler.receiveComponent(this, this._pendingElement || this._currentElement, transaction, this._context);\n    }\n\n    if (this._pendingStateQueue !== null || this._pendingForceUpdate) {\n      this.updateComponent(transaction, this._currentElement, this._currentElement, this._context, this._context);\n    }\n  },\n\n  /**\n   * Perform an update to a mounted component. The componentWillReceiveProps and\n   * shouldComponentUpdate methods are called, then (assuming the update isn't\n   * skipped) the remaining update lifecycle methods are called and the DOM\n   * representation is updated.\n   *\n   * By default, this implements React's rendering and reconciliation algorithm.\n   * Sophisticated clients may wish to override this.\n   *\n   * @param {ReactReconcileTransaction} transaction\n   * @param {ReactElement} prevParentElement\n   * @param {ReactElement} nextParentElement\n   * @internal\n   * @overridable\n   */\n  updateComponent: function updateComponent(transaction, prevParentElement, nextParentElement, prevUnmaskedContext, nextUnmaskedContext) {\n    var inst = this._instance;\n    var nextContext = this._context === nextUnmaskedContext ? inst.context : this._processContext(nextUnmaskedContext);\n    var nextProps; // Distinguish between a props update versus a simple state update\n\n    if (prevParentElement === nextParentElement) {\n      // Skip checking prop types again -- we don't read inst.props to avoid\n      // warning for DOM component props in this upgrade\n      nextProps = nextParentElement.props;\n    } else {\n      nextProps = this._processProps(nextParentElement.props); // An update here will schedule an update but immediately set\n      // _pendingStateQueue which will ensure that any state updates gets\n      // immediately reconciled instead of waiting for the next batch.\n\n      if (inst.componentWillReceiveProps) {\n        inst.componentWillReceiveProps(nextProps, nextContext);\n      }\n    }\n\n    var nextState = this._processPendingState(nextProps, nextContext);\n\n    var shouldUpdate = this._pendingForceUpdate || !inst.shouldComponentUpdate || inst.shouldComponentUpdate(nextProps, nextState, nextContext);\n\n    if (process.env.NODE_ENV !== 'production') {\n      process.env.NODE_ENV !== 'production' ? warning(typeof shouldUpdate !== 'undefined', '%s.shouldComponentUpdate(): Returned undefined instead of a ' + 'boolean value. Make sure to return true or false.', this.getName() || 'ReactCompositeComponent') : undefined;\n    }\n\n    if (shouldUpdate) {\n      this._pendingForceUpdate = false; // Will set `this.props`, `this.state` and `this.context`.\n\n      this._performComponentUpdate(nextParentElement, nextProps, nextState, nextContext, transaction, nextUnmaskedContext);\n    } else {\n      // If it's determined that a component should not update, we still want\n      // to set props and state but we shortcut the rest of the update.\n      this._currentElement = nextParentElement;\n      this._context = nextUnmaskedContext;\n      inst.props = nextProps;\n      inst.state = nextState;\n      inst.context = nextContext;\n    }\n  },\n  _processPendingState: function _processPendingState(props, context) {\n    var inst = this._instance;\n    var queue = this._pendingStateQueue;\n    var replace = this._pendingReplaceState;\n    this._pendingReplaceState = false;\n    this._pendingStateQueue = null;\n\n    if (!queue) {\n      return inst.state;\n    }\n\n    if (replace && queue.length === 1) {\n      return queue[0];\n    }\n\n    var nextState = assign({}, replace ? queue[0] : inst.state);\n\n    for (var i = replace ? 1 : 0; i < queue.length; i++) {\n      var partial = queue[i];\n      assign(nextState, typeof partial === 'function' ? partial.call(inst, nextState, props, context) : partial);\n    }\n\n    return nextState;\n  },\n\n  /**\n   * Merges new props and state, notifies delegate methods of update and\n   * performs update.\n   *\n   * @param {ReactElement} nextElement Next element\n   * @param {object} nextProps Next public object to set as properties.\n   * @param {?object} nextState Next object to set as state.\n   * @param {?object} nextContext Next public object to set as context.\n   * @param {ReactReconcileTransaction} transaction\n   * @param {?object} unmaskedContext\n   * @private\n   */\n  _performComponentUpdate: function _performComponentUpdate(nextElement, nextProps, nextState, nextContext, transaction, unmaskedContext) {\n    var inst = this._instance;\n    var hasComponentDidUpdate = Boolean(inst.componentDidUpdate);\n    var prevProps;\n    var prevState;\n    var prevContext;\n\n    if (hasComponentDidUpdate) {\n      prevProps = inst.props;\n      prevState = inst.state;\n      prevContext = inst.context;\n    }\n\n    if (inst.componentWillUpdate) {\n      inst.componentWillUpdate(nextProps, nextState, nextContext);\n    }\n\n    this._currentElement = nextElement;\n    this._context = unmaskedContext;\n    inst.props = nextProps;\n    inst.state = nextState;\n    inst.context = nextContext;\n\n    this._updateRenderedComponent(transaction, unmaskedContext);\n\n    if (hasComponentDidUpdate) {\n      transaction.getReactMountReady().enqueue(inst.componentDidUpdate.bind(inst, prevProps, prevState, prevContext), inst);\n    }\n  },\n\n  /**\n   * Call the component's `render` method and update the DOM accordingly.\n   *\n   * @param {ReactReconcileTransaction} transaction\n   * @internal\n   */\n  _updateRenderedComponent: function _updateRenderedComponent(transaction, context) {\n    var prevComponentInstance = this._renderedComponent;\n    var prevRenderedElement = prevComponentInstance._currentElement;\n\n    var nextRenderedElement = this._renderValidatedComponent();\n\n    if (shouldUpdateReactComponent(prevRenderedElement, nextRenderedElement)) {\n      ReactReconciler.receiveComponent(prevComponentInstance, nextRenderedElement, transaction, this._processChildContext(context));\n    } else {\n      // These two IDs are actually the same! But nothing should rely on that.\n      var thisID = this._rootNodeID;\n      var prevComponentID = prevComponentInstance._rootNodeID;\n      ReactReconciler.unmountComponent(prevComponentInstance);\n      this._renderedComponent = this._instantiateReactComponent(nextRenderedElement);\n      var nextMarkup = ReactReconciler.mountComponent(this._renderedComponent, thisID, transaction, this._processChildContext(context));\n\n      this._replaceNodeWithMarkupByID(prevComponentID, nextMarkup);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  _replaceNodeWithMarkupByID: function _replaceNodeWithMarkupByID(prevComponentID, nextMarkup) {\n    ReactComponentEnvironment.replaceNodeWithMarkupByID(prevComponentID, nextMarkup);\n  },\n\n  /**\n   * @protected\n   */\n  _renderValidatedComponentWithoutOwnerOrContext: function _renderValidatedComponentWithoutOwnerOrContext() {\n    var inst = this._instance;\n    var renderedComponent = inst.render();\n\n    if (process.env.NODE_ENV !== 'production') {\n      // We allow auto-mocks to proceed as if they're returning null.\n      if (typeof renderedComponent === 'undefined' && inst.render._isMockFunction) {\n        // This is probably bad practice. Consider warning here and\n        // deprecating this convenience.\n        renderedComponent = null;\n      }\n    }\n\n    return renderedComponent;\n  },\n\n  /**\n   * @private\n   */\n  _renderValidatedComponent: function _renderValidatedComponent() {\n    var renderedComponent;\n    ReactCurrentOwner.current = this;\n\n    try {\n      renderedComponent = this._renderValidatedComponentWithoutOwnerOrContext();\n    } finally {\n      ReactCurrentOwner.current = null;\n    }\n\n    !( // TODO: An `isValidNode` function would probably be more appropriate\n    renderedComponent === null || renderedComponent === false || ReactElement.isValidElement(renderedComponent)) ? process.env.NODE_ENV !== 'production' ? invariant(false, '%s.render(): A valid ReactComponent must be returned. You may have ' + 'returned undefined, an array or some other invalid object.', this.getName() || 'ReactCompositeComponent') : invariant(false) : undefined;\n    return renderedComponent;\n  },\n\n  /**\n   * Lazily allocates the refs object and stores `component` as `ref`.\n   *\n   * @param {string} ref Reference name.\n   * @param {component} component Component to store as `ref`.\n   * @final\n   * @private\n   */\n  attachRef: function attachRef(ref, component) {\n    var inst = this.getPublicInstance();\n    !(inst != null) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Stateless function components cannot have refs.') : invariant(false) : undefined;\n    var publicComponentInstance = component.getPublicInstance();\n\n    if (process.env.NODE_ENV !== 'production') {\n      var componentName = component && component.getName ? component.getName() : 'a component';\n      process.env.NODE_ENV !== 'production' ? warning(publicComponentInstance != null, 'Stateless function components cannot be given refs ' + '(See ref \"%s\" in %s created by %s). ' + 'Attempts to access this ref will fail.', ref, componentName, this.getName()) : undefined;\n    }\n\n    var refs = inst.refs === emptyObject ? inst.refs = {} : inst.refs;\n    refs[ref] = publicComponentInstance;\n  },\n\n  /**\n   * Detaches a reference name.\n   *\n   * @param {string} ref Name to dereference.\n   * @final\n   * @private\n   */\n  detachRef: function detachRef(ref) {\n    var refs = this.getPublicInstance().refs;\n    delete refs[ref];\n  },\n\n  /**\n   * Get a text description of the component that can be used to identify it\n   * in error messages.\n   * @return {string} The name or null.\n   * @internal\n   */\n  getName: function getName() {\n    var type = this._currentElement.type;\n    var constructor = this._instance && this._instance.constructor;\n    return type.displayName || constructor && constructor.displayName || type.name || constructor && constructor.name || null;\n  },\n\n  /**\n   * Get the publicly accessible representation of this component - i.e. what\n   * is exposed by refs and returned by render. Can be null for stateless\n   * components.\n   *\n   * @return {ReactComponent} the public component instance.\n   * @internal\n   */\n  getPublicInstance: function getPublicInstance() {\n    var inst = this._instance;\n\n    if (inst instanceof StatelessComponent) {\n      return null;\n    }\n\n    return inst;\n  },\n  // Stub\n  _instantiateReactComponent: null\n};\nReactPerf.measureMethods(ReactCompositeComponentMixin, 'ReactCompositeComponent', {\n  mountComponent: 'mountComponent',\n  updateComponent: 'updateComponent',\n  _renderValidatedComponent: '_renderValidatedComponent'\n});\nvar ReactCompositeComponent = {\n  Mixin: ReactCompositeComponentMixin\n};\nmodule.exports = ReactCompositeComponent;","map":{"version":3,"names":["ReactComponentEnvironment","require","ReactCurrentOwner","ReactElement","ReactInstanceMap","ReactPerf","ReactPropTypeLocations","ReactPropTypeLocationNames","ReactReconciler","ReactUpdateQueue","assign","emptyObject","invariant","shouldUpdateReactComponent","warning","getDeclarationErrorAddendum","component","owner","_currentElement","_owner","name","getName","StatelessComponent","Component","prototype","render","get","type","props","context","updater","nextMountID","ReactCompositeComponentMixin","construct","element","_rootNodeID","_instance","_pendingElement","_pendingStateQueue","_pendingReplaceState","_pendingForceUpdate","_renderedComponent","_context","_mountOrder","_topLevelWrapper","_pendingCallbacks","mountComponent","rootID","transaction","publicProps","_processProps","publicContext","_processContext","inst","renderedElement","canInstantiate","process","env","NODE_ENV","current","isValidElement","displayName","undefined","isReactComponent","refs","set","getInitialState","isReactClassApproved","getDefaultProps","propTypes","contextTypes","componentShouldUpdate","componentDidUnmount","componentWillRecieveProps","initialState","state","Array","isArray","componentWillMount","_processPendingState","_renderValidatedComponent","_instantiateReactComponent","markup","_processChildContext","componentDidMount","getReactMountReady","enqueue","unmountComponent","componentWillUnmount","remove","_maskContext","maskedContext","contextName","_checkPropTypes","currentContext","childContext","getChildContext","childContextTypes","newProps","prop","location","componentName","propName","hasOwnProperty","error","ex","Error","addendum","message","receiveComponent","nextElement","nextContext","prevElement","prevContext","updateComponent","performUpdateIfNecessary","prevParentElement","nextParentElement","prevUnmaskedContext","nextUnmaskedContext","nextProps","componentWillReceiveProps","nextState","shouldUpdate","shouldComponentUpdate","_performComponentUpdate","queue","replace","length","i","partial","call","unmaskedContext","hasComponentDidUpdate","Boolean","componentDidUpdate","prevProps","prevState","componentWillUpdate","_updateRenderedComponent","bind","prevComponentInstance","prevRenderedElement","nextRenderedElement","thisID","prevComponentID","nextMarkup","_replaceNodeWithMarkupByID","replaceNodeWithMarkupByID","_renderValidatedComponentWithoutOwnerOrContext","renderedComponent","_isMockFunction","attachRef","ref","getPublicInstance","publicComponentInstance","detachRef","constructor","measureMethods","ReactCompositeComponent","Mixin","module","exports"],"sources":["/Users/rlborgen/git/ionconfig/editor/node_modules/react-popout/node_modules/react/lib/ReactCompositeComponent.js"],"sourcesContent":["/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule ReactCompositeComponent\n */\n\n'use strict';\n\nvar ReactComponentEnvironment = require('./ReactComponentEnvironment');\nvar ReactCurrentOwner = require('./ReactCurrentOwner');\nvar ReactElement = require('./ReactElement');\nvar ReactInstanceMap = require('./ReactInstanceMap');\nvar ReactPerf = require('./ReactPerf');\nvar ReactPropTypeLocations = require('./ReactPropTypeLocations');\nvar ReactPropTypeLocationNames = require('./ReactPropTypeLocationNames');\nvar ReactReconciler = require('./ReactReconciler');\nvar ReactUpdateQueue = require('./ReactUpdateQueue');\n\nvar assign = require('./Object.assign');\nvar emptyObject = require('fbjs/lib/emptyObject');\nvar invariant = require('fbjs/lib/invariant');\nvar shouldUpdateReactComponent = require('./shouldUpdateReactComponent');\nvar warning = require('fbjs/lib/warning');\n\nfunction getDeclarationErrorAddendum(component) {\n  var owner = component._currentElement._owner || null;\n  if (owner) {\n    var name = owner.getName();\n    if (name) {\n      return ' Check the render method of `' + name + '`.';\n    }\n  }\n  return '';\n}\n\nfunction StatelessComponent(Component) {}\nStatelessComponent.prototype.render = function () {\n  var Component = ReactInstanceMap.get(this)._currentElement.type;\n  return Component(this.props, this.context, this.updater);\n};\n\n/**\n * ------------------ The Life-Cycle of a Composite Component ------------------\n *\n * - constructor: Initialization of state. The instance is now retained.\n *   - componentWillMount\n *   - render\n *   - [children's constructors]\n *     - [children's componentWillMount and render]\n *     - [children's componentDidMount]\n *     - componentDidMount\n *\n *       Update Phases:\n *       - componentWillReceiveProps (only called if parent updated)\n *       - shouldComponentUpdate\n *         - componentWillUpdate\n *           - render\n *           - [children's constructors or receive props phases]\n *         - componentDidUpdate\n *\n *     - componentWillUnmount\n *     - [children's componentWillUnmount]\n *   - [children destroyed]\n * - (destroyed): The instance is now blank, released by React and ready for GC.\n *\n * -----------------------------------------------------------------------------\n */\n\n/**\n * An incrementing ID assigned to each component when it is mounted. This is\n * used to enforce the order in which `ReactUpdates` updates dirty components.\n *\n * @private\n */\nvar nextMountID = 1;\n\n/**\n * @lends {ReactCompositeComponent.prototype}\n */\nvar ReactCompositeComponentMixin = {\n\n  /**\n   * Base constructor for all composite component.\n   *\n   * @param {ReactElement} element\n   * @final\n   * @internal\n   */\n  construct: function (element) {\n    this._currentElement = element;\n    this._rootNodeID = null;\n    this._instance = null;\n\n    // See ReactUpdateQueue\n    this._pendingElement = null;\n    this._pendingStateQueue = null;\n    this._pendingReplaceState = false;\n    this._pendingForceUpdate = false;\n\n    this._renderedComponent = null;\n\n    this._context = null;\n    this._mountOrder = 0;\n    this._topLevelWrapper = null;\n\n    // See ReactUpdates and ReactUpdateQueue.\n    this._pendingCallbacks = null;\n  },\n\n  /**\n   * Initializes the component, renders markup, and registers event listeners.\n   *\n   * @param {string} rootID DOM ID of the root node.\n   * @param {ReactReconcileTransaction|ReactServerRenderingTransaction} transaction\n   * @return {?string} Rendered markup to be inserted into the DOM.\n   * @final\n   * @internal\n   */\n  mountComponent: function (rootID, transaction, context) {\n    this._context = context;\n    this._mountOrder = nextMountID++;\n    this._rootNodeID = rootID;\n\n    var publicProps = this._processProps(this._currentElement.props);\n    var publicContext = this._processContext(context);\n\n    var Component = this._currentElement.type;\n\n    // Initialize the public class\n    var inst;\n    var renderedElement;\n\n    // This is a way to detect if Component is a stateless arrow function\n    // component, which is not newable. It might not be 100% reliable but is\n    // something we can do until we start detecting that Component extends\n    // React.Component. We already assume that typeof Component === 'function'.\n    var canInstantiate = ('prototype' in Component);\n\n    if (canInstantiate) {\n      if (process.env.NODE_ENV !== 'production') {\n        ReactCurrentOwner.current = this;\n        try {\n          inst = new Component(publicProps, publicContext, ReactUpdateQueue);\n        } finally {\n          ReactCurrentOwner.current = null;\n        }\n      } else {\n        inst = new Component(publicProps, publicContext, ReactUpdateQueue);\n      }\n    }\n\n    if (!canInstantiate || inst === null || inst === false || ReactElement.isValidElement(inst)) {\n      renderedElement = inst;\n      inst = new StatelessComponent(Component);\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      // This will throw later in _renderValidatedComponent, but add an early\n      // warning now to help debugging\n      if (inst.render == null) {\n        process.env.NODE_ENV !== 'production' ? warning(false, '%s(...): No `render` method found on the returned component ' + 'instance: you may have forgotten to define `render`, returned ' + 'null/false from a stateless component, or tried to render an ' + 'element whose type is a function that isn\\'t a React component.', Component.displayName || Component.name || 'Component') : undefined;\n      } else {\n        // We support ES6 inheriting from React.Component, the module pattern,\n        // and stateless components, but not ES6 classes that don't extend\n        process.env.NODE_ENV !== 'production' ? warning(Component.prototype && Component.prototype.isReactComponent || !canInstantiate || !(inst instanceof Component), '%s(...): React component classes must extend React.Component.', Component.displayName || Component.name || 'Component') : undefined;\n      }\n    }\n\n    // These should be set up in the constructor, but as a convenience for\n    // simpler class abstractions, we set them up after the fact.\n    inst.props = publicProps;\n    inst.context = publicContext;\n    inst.refs = emptyObject;\n    inst.updater = ReactUpdateQueue;\n\n    this._instance = inst;\n\n    // Store a reference from the instance back to the internal representation\n    ReactInstanceMap.set(inst, this);\n\n    if (process.env.NODE_ENV !== 'production') {\n      // Since plain JS classes are defined without any special initialization\n      // logic, we can not catch common errors early. Therefore, we have to\n      // catch them here, at initialization time, instead.\n      process.env.NODE_ENV !== 'production' ? warning(!inst.getInitialState || inst.getInitialState.isReactClassApproved, 'getInitialState was defined on %s, a plain JavaScript class. ' + 'This is only supported for classes created using React.createClass. ' + 'Did you mean to define a state property instead?', this.getName() || 'a component') : undefined;\n      process.env.NODE_ENV !== 'production' ? warning(!inst.getDefaultProps || inst.getDefaultProps.isReactClassApproved, 'getDefaultProps was defined on %s, a plain JavaScript class. ' + 'This is only supported for classes created using React.createClass. ' + 'Use a static property to define defaultProps instead.', this.getName() || 'a component') : undefined;\n      process.env.NODE_ENV !== 'production' ? warning(!inst.propTypes, 'propTypes was defined as an instance property on %s. Use a static ' + 'property to define propTypes instead.', this.getName() || 'a component') : undefined;\n      process.env.NODE_ENV !== 'production' ? warning(!inst.contextTypes, 'contextTypes was defined as an instance property on %s. Use a ' + 'static property to define contextTypes instead.', this.getName() || 'a component') : undefined;\n      process.env.NODE_ENV !== 'production' ? warning(typeof inst.componentShouldUpdate !== 'function', '%s has a method called ' + 'componentShouldUpdate(). Did you mean shouldComponentUpdate()? ' + 'The name is phrased as a question because the function is ' + 'expected to return a value.', this.getName() || 'A component') : undefined;\n      process.env.NODE_ENV !== 'production' ? warning(typeof inst.componentDidUnmount !== 'function', '%s has a method called ' + 'componentDidUnmount(). But there is no such lifecycle method. ' + 'Did you mean componentWillUnmount()?', this.getName() || 'A component') : undefined;\n      process.env.NODE_ENV !== 'production' ? warning(typeof inst.componentWillRecieveProps !== 'function', '%s has a method called ' + 'componentWillRecieveProps(). Did you mean componentWillReceiveProps()?', this.getName() || 'A component') : undefined;\n    }\n\n    var initialState = inst.state;\n    if (initialState === undefined) {\n      inst.state = initialState = null;\n    }\n    !(typeof initialState === 'object' && !Array.isArray(initialState)) ? process.env.NODE_ENV !== 'production' ? invariant(false, '%s.state: must be set to an object or null', this.getName() || 'ReactCompositeComponent') : invariant(false) : undefined;\n\n    this._pendingStateQueue = null;\n    this._pendingReplaceState = false;\n    this._pendingForceUpdate = false;\n\n    if (inst.componentWillMount) {\n      inst.componentWillMount();\n      // When mounting, calls to `setState` by `componentWillMount` will set\n      // `this._pendingStateQueue` without triggering a re-render.\n      if (this._pendingStateQueue) {\n        inst.state = this._processPendingState(inst.props, inst.context);\n      }\n    }\n\n    // If not a stateless component, we now render\n    if (renderedElement === undefined) {\n      renderedElement = this._renderValidatedComponent();\n    }\n\n    this._renderedComponent = this._instantiateReactComponent(renderedElement);\n\n    var markup = ReactReconciler.mountComponent(this._renderedComponent, rootID, transaction, this._processChildContext(context));\n    if (inst.componentDidMount) {\n      transaction.getReactMountReady().enqueue(inst.componentDidMount, inst);\n    }\n\n    return markup;\n  },\n\n  /**\n   * Releases any resources allocated by `mountComponent`.\n   *\n   * @final\n   * @internal\n   */\n  unmountComponent: function () {\n    var inst = this._instance;\n\n    if (inst.componentWillUnmount) {\n      inst.componentWillUnmount();\n    }\n\n    ReactReconciler.unmountComponent(this._renderedComponent);\n    this._renderedComponent = null;\n    this._instance = null;\n\n    // Reset pending fields\n    // Even if this component is scheduled for another update in ReactUpdates,\n    // it would still be ignored because these fields are reset.\n    this._pendingStateQueue = null;\n    this._pendingReplaceState = false;\n    this._pendingForceUpdate = false;\n    this._pendingCallbacks = null;\n    this._pendingElement = null;\n\n    // These fields do not really need to be reset since this object is no\n    // longer accessible.\n    this._context = null;\n    this._rootNodeID = null;\n    this._topLevelWrapper = null;\n\n    // Delete the reference from the instance to this internal representation\n    // which allow the internals to be properly cleaned up even if the user\n    // leaks a reference to the public instance.\n    ReactInstanceMap.remove(inst);\n\n    // Some existing components rely on inst.props even after they've been\n    // destroyed (in event handlers).\n    // TODO: inst.props = null;\n    // TODO: inst.state = null;\n    // TODO: inst.context = null;\n  },\n\n  /**\n   * Filters the context object to only contain keys specified in\n   * `contextTypes`\n   *\n   * @param {object} context\n   * @return {?object}\n   * @private\n   */\n  _maskContext: function (context) {\n    var maskedContext = null;\n    var Component = this._currentElement.type;\n    var contextTypes = Component.contextTypes;\n    if (!contextTypes) {\n      return emptyObject;\n    }\n    maskedContext = {};\n    for (var contextName in contextTypes) {\n      maskedContext[contextName] = context[contextName];\n    }\n    return maskedContext;\n  },\n\n  /**\n   * Filters the context object to only contain keys specified in\n   * `contextTypes`, and asserts that they are valid.\n   *\n   * @param {object} context\n   * @return {?object}\n   * @private\n   */\n  _processContext: function (context) {\n    var maskedContext = this._maskContext(context);\n    if (process.env.NODE_ENV !== 'production') {\n      var Component = this._currentElement.type;\n      if (Component.contextTypes) {\n        this._checkPropTypes(Component.contextTypes, maskedContext, ReactPropTypeLocations.context);\n      }\n    }\n    return maskedContext;\n  },\n\n  /**\n   * @param {object} currentContext\n   * @return {object}\n   * @private\n   */\n  _processChildContext: function (currentContext) {\n    var Component = this._currentElement.type;\n    var inst = this._instance;\n    var childContext = inst.getChildContext && inst.getChildContext();\n    if (childContext) {\n      !(typeof Component.childContextTypes === 'object') ? process.env.NODE_ENV !== 'production' ? invariant(false, '%s.getChildContext(): childContextTypes must be defined in order to ' + 'use getChildContext().', this.getName() || 'ReactCompositeComponent') : invariant(false) : undefined;\n      if (process.env.NODE_ENV !== 'production') {\n        this._checkPropTypes(Component.childContextTypes, childContext, ReactPropTypeLocations.childContext);\n      }\n      for (var name in childContext) {\n        !(name in Component.childContextTypes) ? process.env.NODE_ENV !== 'production' ? invariant(false, '%s.getChildContext(): key \"%s\" is not defined in childContextTypes.', this.getName() || 'ReactCompositeComponent', name) : invariant(false) : undefined;\n      }\n      return assign({}, currentContext, childContext);\n    }\n    return currentContext;\n  },\n\n  /**\n   * Processes props by setting default values for unspecified props and\n   * asserting that the props are valid. Does not mutate its argument; returns\n   * a new props object with defaults merged in.\n   *\n   * @param {object} newProps\n   * @return {object}\n   * @private\n   */\n  _processProps: function (newProps) {\n    if (process.env.NODE_ENV !== 'production') {\n      var Component = this._currentElement.type;\n      if (Component.propTypes) {\n        this._checkPropTypes(Component.propTypes, newProps, ReactPropTypeLocations.prop);\n      }\n    }\n    return newProps;\n  },\n\n  /**\n   * Assert that the props are valid\n   *\n   * @param {object} propTypes Map of prop name to a ReactPropType\n   * @param {object} props\n   * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n   * @private\n   */\n  _checkPropTypes: function (propTypes, props, location) {\n    // TODO: Stop validating prop types here and only use the element\n    // validation.\n    var componentName = this.getName();\n    for (var propName in propTypes) {\n      if (propTypes.hasOwnProperty(propName)) {\n        var error;\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          !(typeof propTypes[propName] === 'function') ? process.env.NODE_ENV !== 'production' ? invariant(false, '%s: %s type `%s` is invalid; it must be a function, usually ' + 'from React.PropTypes.', componentName || 'React class', ReactPropTypeLocationNames[location], propName) : invariant(false) : undefined;\n          error = propTypes[propName](props, propName, componentName, location, null, 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED');\n        } catch (ex) {\n          error = ex;\n        }\n        if (error instanceof Error) {\n          // We may want to extend this logic for similar errors in\n          // top-level render calls, so I'm abstracting it away into\n          // a function to minimize refactoring in the future\n          var addendum = getDeclarationErrorAddendum(this);\n\n          if (location === ReactPropTypeLocations.prop) {\n            // Preface gives us something to blacklist in warning module\n            process.env.NODE_ENV !== 'production' ? warning(false, 'Failed Composite propType: %s%s', error.message, addendum) : undefined;\n          } else {\n            process.env.NODE_ENV !== 'production' ? warning(false, 'Failed Context Types: %s%s', error.message, addendum) : undefined;\n          }\n        }\n      }\n    }\n  },\n\n  receiveComponent: function (nextElement, transaction, nextContext) {\n    var prevElement = this._currentElement;\n    var prevContext = this._context;\n\n    this._pendingElement = null;\n\n    this.updateComponent(transaction, prevElement, nextElement, prevContext, nextContext);\n  },\n\n  /**\n   * If any of `_pendingElement`, `_pendingStateQueue`, or `_pendingForceUpdate`\n   * is set, update the component.\n   *\n   * @param {ReactReconcileTransaction} transaction\n   * @internal\n   */\n  performUpdateIfNecessary: function (transaction) {\n    if (this._pendingElement != null) {\n      ReactReconciler.receiveComponent(this, this._pendingElement || this._currentElement, transaction, this._context);\n    }\n\n    if (this._pendingStateQueue !== null || this._pendingForceUpdate) {\n      this.updateComponent(transaction, this._currentElement, this._currentElement, this._context, this._context);\n    }\n  },\n\n  /**\n   * Perform an update to a mounted component. The componentWillReceiveProps and\n   * shouldComponentUpdate methods are called, then (assuming the update isn't\n   * skipped) the remaining update lifecycle methods are called and the DOM\n   * representation is updated.\n   *\n   * By default, this implements React's rendering and reconciliation algorithm.\n   * Sophisticated clients may wish to override this.\n   *\n   * @param {ReactReconcileTransaction} transaction\n   * @param {ReactElement} prevParentElement\n   * @param {ReactElement} nextParentElement\n   * @internal\n   * @overridable\n   */\n  updateComponent: function (transaction, prevParentElement, nextParentElement, prevUnmaskedContext, nextUnmaskedContext) {\n    var inst = this._instance;\n\n    var nextContext = this._context === nextUnmaskedContext ? inst.context : this._processContext(nextUnmaskedContext);\n    var nextProps;\n\n    // Distinguish between a props update versus a simple state update\n    if (prevParentElement === nextParentElement) {\n      // Skip checking prop types again -- we don't read inst.props to avoid\n      // warning for DOM component props in this upgrade\n      nextProps = nextParentElement.props;\n    } else {\n      nextProps = this._processProps(nextParentElement.props);\n      // An update here will schedule an update but immediately set\n      // _pendingStateQueue which will ensure that any state updates gets\n      // immediately reconciled instead of waiting for the next batch.\n\n      if (inst.componentWillReceiveProps) {\n        inst.componentWillReceiveProps(nextProps, nextContext);\n      }\n    }\n\n    var nextState = this._processPendingState(nextProps, nextContext);\n\n    var shouldUpdate = this._pendingForceUpdate || !inst.shouldComponentUpdate || inst.shouldComponentUpdate(nextProps, nextState, nextContext);\n\n    if (process.env.NODE_ENV !== 'production') {\n      process.env.NODE_ENV !== 'production' ? warning(typeof shouldUpdate !== 'undefined', '%s.shouldComponentUpdate(): Returned undefined instead of a ' + 'boolean value. Make sure to return true or false.', this.getName() || 'ReactCompositeComponent') : undefined;\n    }\n\n    if (shouldUpdate) {\n      this._pendingForceUpdate = false;\n      // Will set `this.props`, `this.state` and `this.context`.\n      this._performComponentUpdate(nextParentElement, nextProps, nextState, nextContext, transaction, nextUnmaskedContext);\n    } else {\n      // If it's determined that a component should not update, we still want\n      // to set props and state but we shortcut the rest of the update.\n      this._currentElement = nextParentElement;\n      this._context = nextUnmaskedContext;\n      inst.props = nextProps;\n      inst.state = nextState;\n      inst.context = nextContext;\n    }\n  },\n\n  _processPendingState: function (props, context) {\n    var inst = this._instance;\n    var queue = this._pendingStateQueue;\n    var replace = this._pendingReplaceState;\n    this._pendingReplaceState = false;\n    this._pendingStateQueue = null;\n\n    if (!queue) {\n      return inst.state;\n    }\n\n    if (replace && queue.length === 1) {\n      return queue[0];\n    }\n\n    var nextState = assign({}, replace ? queue[0] : inst.state);\n    for (var i = replace ? 1 : 0; i < queue.length; i++) {\n      var partial = queue[i];\n      assign(nextState, typeof partial === 'function' ? partial.call(inst, nextState, props, context) : partial);\n    }\n\n    return nextState;\n  },\n\n  /**\n   * Merges new props and state, notifies delegate methods of update and\n   * performs update.\n   *\n   * @param {ReactElement} nextElement Next element\n   * @param {object} nextProps Next public object to set as properties.\n   * @param {?object} nextState Next object to set as state.\n   * @param {?object} nextContext Next public object to set as context.\n   * @param {ReactReconcileTransaction} transaction\n   * @param {?object} unmaskedContext\n   * @private\n   */\n  _performComponentUpdate: function (nextElement, nextProps, nextState, nextContext, transaction, unmaskedContext) {\n    var inst = this._instance;\n\n    var hasComponentDidUpdate = Boolean(inst.componentDidUpdate);\n    var prevProps;\n    var prevState;\n    var prevContext;\n    if (hasComponentDidUpdate) {\n      prevProps = inst.props;\n      prevState = inst.state;\n      prevContext = inst.context;\n    }\n\n    if (inst.componentWillUpdate) {\n      inst.componentWillUpdate(nextProps, nextState, nextContext);\n    }\n\n    this._currentElement = nextElement;\n    this._context = unmaskedContext;\n    inst.props = nextProps;\n    inst.state = nextState;\n    inst.context = nextContext;\n\n    this._updateRenderedComponent(transaction, unmaskedContext);\n\n    if (hasComponentDidUpdate) {\n      transaction.getReactMountReady().enqueue(inst.componentDidUpdate.bind(inst, prevProps, prevState, prevContext), inst);\n    }\n  },\n\n  /**\n   * Call the component's `render` method and update the DOM accordingly.\n   *\n   * @param {ReactReconcileTransaction} transaction\n   * @internal\n   */\n  _updateRenderedComponent: function (transaction, context) {\n    var prevComponentInstance = this._renderedComponent;\n    var prevRenderedElement = prevComponentInstance._currentElement;\n    var nextRenderedElement = this._renderValidatedComponent();\n    if (shouldUpdateReactComponent(prevRenderedElement, nextRenderedElement)) {\n      ReactReconciler.receiveComponent(prevComponentInstance, nextRenderedElement, transaction, this._processChildContext(context));\n    } else {\n      // These two IDs are actually the same! But nothing should rely on that.\n      var thisID = this._rootNodeID;\n      var prevComponentID = prevComponentInstance._rootNodeID;\n      ReactReconciler.unmountComponent(prevComponentInstance);\n\n      this._renderedComponent = this._instantiateReactComponent(nextRenderedElement);\n      var nextMarkup = ReactReconciler.mountComponent(this._renderedComponent, thisID, transaction, this._processChildContext(context));\n      this._replaceNodeWithMarkupByID(prevComponentID, nextMarkup);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  _replaceNodeWithMarkupByID: function (prevComponentID, nextMarkup) {\n    ReactComponentEnvironment.replaceNodeWithMarkupByID(prevComponentID, nextMarkup);\n  },\n\n  /**\n   * @protected\n   */\n  _renderValidatedComponentWithoutOwnerOrContext: function () {\n    var inst = this._instance;\n    var renderedComponent = inst.render();\n    if (process.env.NODE_ENV !== 'production') {\n      // We allow auto-mocks to proceed as if they're returning null.\n      if (typeof renderedComponent === 'undefined' && inst.render._isMockFunction) {\n        // This is probably bad practice. Consider warning here and\n        // deprecating this convenience.\n        renderedComponent = null;\n      }\n    }\n\n    return renderedComponent;\n  },\n\n  /**\n   * @private\n   */\n  _renderValidatedComponent: function () {\n    var renderedComponent;\n    ReactCurrentOwner.current = this;\n    try {\n      renderedComponent = this._renderValidatedComponentWithoutOwnerOrContext();\n    } finally {\n      ReactCurrentOwner.current = null;\n    }\n    !(\n    // TODO: An `isValidNode` function would probably be more appropriate\n    renderedComponent === null || renderedComponent === false || ReactElement.isValidElement(renderedComponent)) ? process.env.NODE_ENV !== 'production' ? invariant(false, '%s.render(): A valid ReactComponent must be returned. You may have ' + 'returned undefined, an array or some other invalid object.', this.getName() || 'ReactCompositeComponent') : invariant(false) : undefined;\n    return renderedComponent;\n  },\n\n  /**\n   * Lazily allocates the refs object and stores `component` as `ref`.\n   *\n   * @param {string} ref Reference name.\n   * @param {component} component Component to store as `ref`.\n   * @final\n   * @private\n   */\n  attachRef: function (ref, component) {\n    var inst = this.getPublicInstance();\n    !(inst != null) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Stateless function components cannot have refs.') : invariant(false) : undefined;\n    var publicComponentInstance = component.getPublicInstance();\n    if (process.env.NODE_ENV !== 'production') {\n      var componentName = component && component.getName ? component.getName() : 'a component';\n      process.env.NODE_ENV !== 'production' ? warning(publicComponentInstance != null, 'Stateless function components cannot be given refs ' + '(See ref \"%s\" in %s created by %s). ' + 'Attempts to access this ref will fail.', ref, componentName, this.getName()) : undefined;\n    }\n    var refs = inst.refs === emptyObject ? inst.refs = {} : inst.refs;\n    refs[ref] = publicComponentInstance;\n  },\n\n  /**\n   * Detaches a reference name.\n   *\n   * @param {string} ref Name to dereference.\n   * @final\n   * @private\n   */\n  detachRef: function (ref) {\n    var refs = this.getPublicInstance().refs;\n    delete refs[ref];\n  },\n\n  /**\n   * Get a text description of the component that can be used to identify it\n   * in error messages.\n   * @return {string} The name or null.\n   * @internal\n   */\n  getName: function () {\n    var type = this._currentElement.type;\n    var constructor = this._instance && this._instance.constructor;\n    return type.displayName || constructor && constructor.displayName || type.name || constructor && constructor.name || null;\n  },\n\n  /**\n   * Get the publicly accessible representation of this component - i.e. what\n   * is exposed by refs and returned by render. Can be null for stateless\n   * components.\n   *\n   * @return {ReactComponent} the public component instance.\n   * @internal\n   */\n  getPublicInstance: function () {\n    var inst = this._instance;\n    if (inst instanceof StatelessComponent) {\n      return null;\n    }\n    return inst;\n  },\n\n  // Stub\n  _instantiateReactComponent: null\n\n};\n\nReactPerf.measureMethods(ReactCompositeComponentMixin, 'ReactCompositeComponent', {\n  mountComponent: 'mountComponent',\n  updateComponent: 'updateComponent',\n  _renderValidatedComponent: '_renderValidatedComponent'\n});\n\nvar ReactCompositeComponent = {\n\n  Mixin: ReactCompositeComponentMixin\n\n};\n\nmodule.exports = ReactCompositeComponent;"],"mappings":"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"},"metadata":{},"sourceType":"script"}