{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _activeElement = require('dom-helpers/activeElement');\n\nvar _activeElement2 = _interopRequireDefault(_activeElement);\n\nvar _contains = require('dom-helpers/query/contains');\n\nvar _contains2 = _interopRequireDefault(_contains);\n\nvar _inDOM = require('dom-helpers/util/inDOM');\n\nvar _inDOM2 = _interopRequireDefault(_inDOM);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _componentOrElement = require('prop-types-extra/lib/componentOrElement');\n\nvar _componentOrElement2 = _interopRequireDefault(_componentOrElement);\n\nvar _deprecated = require('prop-types-extra/lib/deprecated');\n\nvar _deprecated2 = _interopRequireDefault(_deprecated);\n\nvar _elementType = require('prop-types-extra/lib/elementType');\n\nvar _elementType2 = _interopRequireDefault(_elementType);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _warning = require('warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _ModalManager = require('./ModalManager');\n\nvar _ModalManager2 = _interopRequireDefault(_ModalManager);\n\nvar _Portal = require('./Portal');\n\nvar _Portal2 = _interopRequireDefault(_Portal);\n\nvar _RefHolder = require('./RefHolder');\n\nvar _RefHolder2 = _interopRequireDefault(_RefHolder);\n\nvar _addEventListener = require('./utils/addEventListener');\n\nvar _addEventListener2 = _interopRequireDefault(_addEventListener);\n\nvar _addFocusListener = require('./utils/addFocusListener');\n\nvar _addFocusListener2 = _interopRequireDefault(_addFocusListener);\n\nvar _getContainer = require('./utils/getContainer');\n\nvar _getContainer2 = _interopRequireDefault(_getContainer);\n\nvar _ownerDocument = require('./utils/ownerDocument');\n\nvar _ownerDocument2 = _interopRequireDefault(_ownerDocument);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/* eslint-disable react/prop-types */\n\n\nvar modalManager = new _ModalManager2.default();\n/**\n * Love them or hate them, `<Modal/>` provides a solid foundation for creating dialogs, lightboxes, or whatever else.\n * The Modal component renders its `children` node in front of a backdrop component.\n *\n * The Modal offers a few helpful features over using just a `<Portal/>` component and some styles:\n *\n * - Manages dialog stacking when one-at-a-time just isn't enough.\n * - Creates a backdrop, for disabling interaction below the modal.\n * - It properly manages focus; moving to the modal content, and keeping it there until the modal is closed.\n * - It disables scrolling of the page content while open.\n * - Adds the appropriate ARIA roles are automatically.\n * - Easily pluggable animations via a `<Transition/>` component.\n *\n * Note that, in the same way the backdrop element prevents users from clicking or interacting\n * with the page content underneath the Modal, Screen readers also need to be signaled to not to\n * interact with page content while the Modal is open. To do this, we use a common technique of applying\n * the `aria-hidden='true'` attribute to the non-Modal elements in the Modal `container`. This means that for\n * a Modal to be truly modal, it should have a `container` that is _outside_ your app's\n * React hierarchy (such as the default: document.body).\n */\n\nvar Modal = function (_React$Component) {\n  _inherits(Modal, _React$Component);\n\n  function Modal() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Modal);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _initialiseProps.call(_this), _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Modal.prototype.omitProps = function omitProps(props, propTypes) {\n    var keys = Object.keys(props);\n    var newProps = {};\n    keys.map(function (prop) {\n      if (!Object.prototype.hasOwnProperty.call(propTypes, prop)) {\n        newProps[prop] = props[prop];\n      }\n    });\n    return newProps;\n  };\n\n  Modal.prototype.render = function render() {\n    var _props = this.props,\n        show = _props.show,\n        container = _props.container,\n        children = _props.children,\n        Transition = _props.transition,\n        backdrop = _props.backdrop,\n        dialogTransitionTimeout = _props.dialogTransitionTimeout,\n        className = _props.className,\n        style = _props.style,\n        onExit = _props.onExit,\n        onExiting = _props.onExiting,\n        onEnter = _props.onEnter,\n        onEntering = _props.onEntering,\n        onEntered = _props.onEntered;\n\n    var dialog = _react2.default.Children.only(children);\n\n    var filteredProps = this.omitProps(this.props, Modal.propTypes);\n    var mountModal = show || Transition && !this.state.exited;\n\n    if (!mountModal) {\n      return null;\n    }\n\n    var _dialog$props = dialog.props,\n        role = _dialog$props.role,\n        tabIndex = _dialog$props.tabIndex;\n\n    if (role === undefined || tabIndex === undefined) {\n      dialog = (0, _react.cloneElement)(dialog, {\n        role: role === undefined ? 'document' : role,\n        tabIndex: tabIndex == null ? '-1' : tabIndex\n      });\n    }\n\n    if (Transition) {\n      dialog = _react2.default.createElement(Transition, {\n        transitionAppear: true,\n        unmountOnExit: true,\n        'in': show,\n        timeout: dialogTransitionTimeout,\n        onExit: onExit,\n        onExiting: onExiting,\n        onExited: this.handleHidden,\n        onEnter: onEnter,\n        onEntering: onEntering,\n        onEntered: onEntered\n      }, dialog);\n    }\n\n    return _react2.default.createElement(_Portal2.default, {\n      ref: this.setMountNode,\n      container: container,\n      onRendered: this.onPortalRendered\n    }, _react2.default.createElement('div', _extends({\n      ref: this.setModalNodeRef,\n      role: role || 'dialog'\n    }, filteredProps, {\n      style: style,\n      className: className\n    }), backdrop && this.renderBackdrop(), _react2.default.createElement(_RefHolder2.default, {\n      ref: this.setDialogRef\n    }, dialog)));\n  };\n\n  Modal.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    if (nextProps.show) {\n      this.setState({\n        exited: false\n      });\n    } else if (!nextProps.transition) {\n      // Otherwise let handleHidden take care of marking exited.\n      this.setState({\n        exited: true\n      });\n    }\n  };\n\n  Modal.prototype.componentWillUpdate = function componentWillUpdate(nextProps) {\n    if (!this.props.show && nextProps.show) {\n      this.checkForFocus();\n    }\n  };\n\n  Modal.prototype.componentDidMount = function componentDidMount() {\n    this._isMounted = true;\n\n    if (this.props.show) {\n      this.onShow();\n    }\n  };\n\n  Modal.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var transition = this.props.transition;\n\n    if (prevProps.show && !this.props.show && !transition) {\n      // Otherwise handleHidden will call this.\n      this.onHide();\n    } else if (!prevProps.show && this.props.show) {\n      this.onShow();\n    }\n  };\n\n  Modal.prototype.componentWillUnmount = function componentWillUnmount() {\n    var _props2 = this.props,\n        show = _props2.show,\n        transition = _props2.transition;\n    this._isMounted = false;\n\n    if (show || transition && !this.state.exited) {\n      this.onHide();\n    }\n  };\n\n  Modal.prototype.autoFocus = function autoFocus() {\n    if (!this.props.autoFocus) {\n      return;\n    }\n\n    var dialogElement = this.getDialogElement();\n    var currentActiveElement = (0, _activeElement2.default)((0, _ownerDocument2.default)(this));\n\n    if (dialogElement && !(0, _contains2.default)(dialogElement, currentActiveElement)) {\n      this.lastFocus = currentActiveElement;\n\n      if (!dialogElement.hasAttribute('tabIndex')) {\n        (0, _warning2.default)(false, 'The modal content node does not accept focus. For the benefit of ' + 'assistive technologies, the tabIndex of the node is being set ' + 'to \"-1\".');\n        dialogElement.setAttribute('tabIndex', -1);\n      }\n\n      dialogElement.focus();\n    }\n  };\n\n  Modal.prototype.restoreLastFocus = function restoreLastFocus() {\n    // Support: <=IE11 doesn't support `focus()` on svg elements (RB: #917)\n    if (this.lastFocus && this.lastFocus.focus) {\n      this.lastFocus.focus();\n      this.lastFocus = null;\n    }\n  };\n\n  Modal.prototype.getDialogElement = function getDialogElement() {\n    return _reactDom2.default.findDOMNode(this.dialog);\n  };\n\n  Modal.prototype.isTopModal = function isTopModal() {\n    return this.props.manager.isTopModal(this);\n  };\n\n  return Modal;\n}(_react2.default.Component);\n\nModal.propTypes = _extends({}, _Portal2.default.propTypes, {\n  /**\n   * Set the visibility of the Modal\n   */\n  show: _propTypes2.default.bool,\n\n  /**\n   * A Node, Component instance, or function that returns either. The Modal is appended to it's container element.\n   *\n   * For the sake of assistive technologies, the container should usually be the document body, so that the rest of the\n   * page content can be placed behind a virtual backdrop as well as a visual one.\n   */\n  container: _propTypes2.default.oneOfType([_componentOrElement2.default, _propTypes2.default.func]),\n\n  /**\n   * A callback fired when the Modal is opening.\n   */\n  onShow: _propTypes2.default.func,\n\n  /**\n   * A callback fired when either the backdrop is clicked, or the escape key is pressed.\n   *\n   * The `onHide` callback only signals intent from the Modal,\n   * you must actually set the `show` prop to `false` for the Modal to close.\n   */\n  onHide: _propTypes2.default.func,\n\n  /**\n   * Include a backdrop component.\n   */\n  backdrop: _propTypes2.default.oneOfType([_propTypes2.default.bool, _propTypes2.default.oneOf(['static'])]),\n\n  /**\n   * A function that returns a backdrop component. Useful for custom\n   * backdrop rendering.\n   *\n   * ```js\n   *  renderBackdrop={props => <MyBackdrop {...props} />}\n   * ```\n   */\n  renderBackdrop: _propTypes2.default.func,\n\n  /**\n   * A callback fired when the escape key, if specified in `keyboard`, is pressed.\n   */\n  onEscapeKeyDown: _propTypes2.default.func,\n\n  /**\n   * Support for this function will be deprecated. Please use `onEscapeKeyDown` instead\n   * A callback fired when the escape key, if specified in `keyboard`, is pressed.\n   * @deprecated\n   */\n  onEscapeKeyUp: (0, _deprecated2.default)(_propTypes2.default.func, 'Please use onEscapeKeyDown instead for consistency'),\n\n  /**\n   * A callback fired when the backdrop, if specified, is clicked.\n   */\n  onBackdropClick: _propTypes2.default.func,\n\n  /**\n   * A style object for the backdrop component.\n   */\n  backdropStyle: _propTypes2.default.object,\n\n  /**\n   * A css class or classes for the backdrop component.\n   */\n  backdropClassName: _propTypes2.default.string,\n\n  /**\n   * A css class or set of classes applied to the modal container when the modal is open,\n   * and removed when it is closed.\n   */\n  containerClassName: _propTypes2.default.string,\n\n  /**\n   * Close the modal when escape key is pressed\n   */\n  keyboard: _propTypes2.default.bool,\n\n  /**\n   * A `<Transition/>` component to use for the dialog and backdrop components.\n   */\n  transition: _elementType2.default,\n\n  /**\n   * The `timeout` of the dialog transition if specified. This number is used to ensure that\n   * transition callbacks are always fired, even if browser transition events are canceled.\n   *\n   * See the Transition `timeout` prop for more infomation.\n   */\n  dialogTransitionTimeout: _propTypes2.default.number,\n\n  /**\n   * The `timeout` of the backdrop transition if specified. This number is used to\n   * ensure that transition callbacks are always fired, even if browser transition events are canceled.\n   *\n   * See the Transition `timeout` prop for more infomation.\n   */\n  backdropTransitionTimeout: _propTypes2.default.number,\n\n  /**\n   * When `true` The modal will automatically shift focus to itself when it opens, and\n   * replace it to the last focused element when it closes. This also\n   * works correctly with any Modal children that have the `autoFocus` prop.\n   *\n   * Generally this should never be set to `false` as it makes the Modal less\n   * accessible to assistive technologies, like screen readers.\n   */\n  autoFocus: _propTypes2.default.bool,\n\n  /**\n   * When `true` The modal will prevent focus from leaving the Modal while open.\n   *\n   * Generally this should never be set to `false` as it makes the Modal less\n   * accessible to assistive technologies, like screen readers.\n   */\n  enforceFocus: _propTypes2.default.bool,\n\n  /**\n   * When `true` The modal will restore focus to previously focused element once\n   * modal is hidden\n   */\n  restoreFocus: _propTypes2.default.bool,\n\n  /**\n   * Callback fired before the Modal transitions in\n   */\n  onEnter: _propTypes2.default.func,\n\n  /**\n   * Callback fired as the Modal begins to transition in\n   */\n  onEntering: _propTypes2.default.func,\n\n  /**\n   * Callback fired after the Modal finishes transitioning in\n   */\n  onEntered: _propTypes2.default.func,\n\n  /**\n   * Callback fired right before the Modal transitions out\n   */\n  onExit: _propTypes2.default.func,\n\n  /**\n   * Callback fired as the Modal begins to transition out\n   */\n  onExiting: _propTypes2.default.func,\n\n  /**\n   * Callback fired after the Modal finishes transitioning out\n   */\n  onExited: _propTypes2.default.func,\n\n  /**\n   * A ModalManager instance used to track and manage the state of open\n   * Modals. Useful when customizing how modals interact within a container\n   */\n  manager: _propTypes2.default.object.isRequired\n});\nModal.defaultProps = {\n  show: false,\n  backdrop: true,\n  keyboard: true,\n  autoFocus: true,\n  enforceFocus: true,\n  restoreFocus: true,\n  onHide: function onHide() {},\n  manager: modalManager,\n  renderBackdrop: function renderBackdrop(props) {\n    return _react2.default.createElement('div', props);\n  }\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.state = {\n    exited: !this.props.show\n  };\n\n  this.renderBackdrop = function () {\n    var _props3 = _this2.props,\n        backdropStyle = _props3.backdropStyle,\n        backdropClassName = _props3.backdropClassName,\n        renderBackdrop = _props3.renderBackdrop,\n        Transition = _props3.transition,\n        backdropTransitionTimeout = _props3.backdropTransitionTimeout;\n\n    var backdropRef = function backdropRef(ref) {\n      return _this2.backdrop = ref;\n    };\n\n    var backdrop = renderBackdrop({\n      ref: backdropRef,\n      style: backdropStyle,\n      className: backdropClassName,\n      onClick: _this2.handleBackdropClick\n    });\n\n    if (Transition) {\n      backdrop = _react2.default.createElement(Transition, {\n        transitionAppear: true,\n        'in': _this2.props.show,\n        timeout: backdropTransitionTimeout\n      }, backdrop);\n    }\n\n    return backdrop;\n  };\n\n  this.onPortalRendered = function () {\n    _this2.autoFocus();\n\n    if (_this2.props.onShow) {\n      _this2.props.onShow();\n    }\n  };\n\n  this.onShow = function () {\n    var doc = (0, _ownerDocument2.default)(_this2);\n    var container = (0, _getContainer2.default)(_this2.props.container, doc.body);\n\n    _this2.props.manager.add(_this2, container, _this2.props.containerClassName);\n\n    _this2._onDocumentKeydownListener = (0, _addEventListener2.default)(doc, 'keydown', _this2.handleDocumentKeyDown);\n    _this2._onDocumentKeyupListener = (0, _addEventListener2.default)(doc, 'keyup', _this2.handleDocumentKeyUp);\n    _this2._onFocusinListener = (0, _addFocusListener2.default)(_this2.enforceFocus);\n  };\n\n  this.onHide = function () {\n    _this2.props.manager.remove(_this2);\n\n    _this2._onDocumentKeydownListener.remove();\n\n    _this2._onDocumentKeyupListener.remove();\n\n    _this2._onFocusinListener.remove();\n\n    if (_this2.props.restoreFocus) {\n      _this2.restoreLastFocus();\n    }\n  };\n\n  this.setMountNode = function (ref) {\n    _this2.mountNode = ref ? ref.getMountNode() : ref;\n  };\n\n  this.setModalNodeRef = function (ref) {\n    _this2.modalNode = ref;\n  };\n\n  this.setDialogRef = function (ref) {\n    _this2.dialog = ref;\n  };\n\n  this.handleHidden = function () {\n    _this2.setState({\n      exited: true\n    });\n\n    _this2.onHide();\n\n    if (_this2.props.onExited) {\n      var _props4;\n\n      (_props4 = _this2.props).onExited.apply(_props4, arguments);\n    }\n  };\n\n  this.handleBackdropClick = function (e) {\n    if (e.target !== e.currentTarget) {\n      return;\n    }\n\n    if (_this2.props.onBackdropClick) {\n      _this2.props.onBackdropClick(e);\n    }\n\n    if (_this2.props.backdrop === true) {\n      _this2.props.onHide();\n    }\n  };\n\n  this.handleDocumentKeyDown = function (e) {\n    if (_this2.props.keyboard && e.keyCode === 27 && _this2.isTopModal()) {\n      if (_this2.props.onEscapeKeyDown) {\n        _this2.props.onEscapeKeyDown(e);\n      }\n\n      _this2.props.onHide();\n    }\n  };\n\n  this.handleDocumentKeyUp = function (e) {\n    if (_this2.props.keyboard && e.keyCode === 27 && _this2.isTopModal()) {\n      if (_this2.props.onEscapeKeyUp) {\n        _this2.props.onEscapeKeyUp(e);\n      }\n    }\n  };\n\n  this.checkForFocus = function () {\n    if (_inDOM2.default) {\n      _this2.lastFocus = (0, _activeElement2.default)();\n    }\n  };\n\n  this.enforceFocus = function () {\n    if (!_this2.props.enforceFocus || !_this2._isMounted || !_this2.isTopModal()) {\n      return;\n    }\n\n    var dialogElement = _this2.getDialogElement();\n\n    var currentActiveElement = (0, _activeElement2.default)((0, _ownerDocument2.default)(_this2));\n\n    if (dialogElement && !(0, _contains2.default)(dialogElement, currentActiveElement)) {\n      dialogElement.focus();\n    }\n  };\n};\n\nModal.Manager = _ModalManager2.default;\nexports.default = Modal;\nmodule.exports = exports['default'];","map":{"version":3,"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_activeElement","require","_activeElement2","_interopRequireDefault","_contains","_contains2","_inDOM","_inDOM2","_propTypes","_propTypes2","_componentOrElement","_componentOrElement2","_deprecated","_deprecated2","_elementType","_elementType2","_react","_react2","_reactDom","_reactDom2","_warning","_warning2","_ModalManager","_ModalManager2","_Portal","_Portal2","_RefHolder","_RefHolder2","_addEventListener","_addEventListener2","_addFocusListener","_addFocusListener2","_getContainer","_getContainer2","_ownerDocument","_ownerDocument2","obj","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","modalManager","Modal","_React$Component","_temp","_this","_ret","_len","args","Array","_key","apply","concat","_initialiseProps","omitProps","props","propTypes","keys","newProps","map","prop","render","_props","show","container","children","Transition","transition","backdrop","dialogTransitionTimeout","className","style","onExit","onExiting","onEnter","onEntering","onEntered","dialog","Children","only","filteredProps","mountModal","state","exited","_dialog$props","role","tabIndex","undefined","cloneElement","createElement","transitionAppear","unmountOnExit","timeout","onExited","handleHidden","ref","setMountNode","onRendered","onPortalRendered","setModalNodeRef","renderBackdrop","setDialogRef","componentWillReceiveProps","nextProps","setState","componentWillUpdate","checkForFocus","componentDidMount","_isMounted","onShow","componentDidUpdate","prevProps","onHide","componentWillUnmount","_props2","autoFocus","dialogElement","getDialogElement","currentActiveElement","lastFocus","hasAttribute","setAttribute","focus","restoreLastFocus","findDOMNode","isTopModal","manager","Component","bool","oneOfType","func","oneOf","onEscapeKeyDown","onEscapeKeyUp","onBackdropClick","backdropStyle","object","backdropClassName","string","containerClassName","keyboard","number","backdropTransitionTimeout","enforceFocus","restoreFocus","isRequired","defaultProps","_this2","_props3","backdropRef","onClick","handleBackdropClick","doc","body","add","_onDocumentKeydownListener","handleDocumentKeyDown","_onDocumentKeyupListener","handleDocumentKeyUp","_onFocusinListener","remove","mountNode","getMountNode","modalNode","_props4","e","currentTarget","keyCode","Manager","module"],"sources":["/Users/rlborgen/git/ionconfig/editor/node_modules/react-overlays/lib/Modal.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _activeElement = require('dom-helpers/activeElement');\n\nvar _activeElement2 = _interopRequireDefault(_activeElement);\n\nvar _contains = require('dom-helpers/query/contains');\n\nvar _contains2 = _interopRequireDefault(_contains);\n\nvar _inDOM = require('dom-helpers/util/inDOM');\n\nvar _inDOM2 = _interopRequireDefault(_inDOM);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _componentOrElement = require('prop-types-extra/lib/componentOrElement');\n\nvar _componentOrElement2 = _interopRequireDefault(_componentOrElement);\n\nvar _deprecated = require('prop-types-extra/lib/deprecated');\n\nvar _deprecated2 = _interopRequireDefault(_deprecated);\n\nvar _elementType = require('prop-types-extra/lib/elementType');\n\nvar _elementType2 = _interopRequireDefault(_elementType);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _warning = require('warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _ModalManager = require('./ModalManager');\n\nvar _ModalManager2 = _interopRequireDefault(_ModalManager);\n\nvar _Portal = require('./Portal');\n\nvar _Portal2 = _interopRequireDefault(_Portal);\n\nvar _RefHolder = require('./RefHolder');\n\nvar _RefHolder2 = _interopRequireDefault(_RefHolder);\n\nvar _addEventListener = require('./utils/addEventListener');\n\nvar _addEventListener2 = _interopRequireDefault(_addEventListener);\n\nvar _addFocusListener = require('./utils/addFocusListener');\n\nvar _addFocusListener2 = _interopRequireDefault(_addFocusListener);\n\nvar _getContainer = require('./utils/getContainer');\n\nvar _getContainer2 = _interopRequireDefault(_getContainer);\n\nvar _ownerDocument = require('./utils/ownerDocument');\n\nvar _ownerDocument2 = _interopRequireDefault(_ownerDocument);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /* eslint-disable react/prop-types */\n\nvar modalManager = new _ModalManager2.default();\n\n/**\n * Love them or hate them, `<Modal/>` provides a solid foundation for creating dialogs, lightboxes, or whatever else.\n * The Modal component renders its `children` node in front of a backdrop component.\n *\n * The Modal offers a few helpful features over using just a `<Portal/>` component and some styles:\n *\n * - Manages dialog stacking when one-at-a-time just isn't enough.\n * - Creates a backdrop, for disabling interaction below the modal.\n * - It properly manages focus; moving to the modal content, and keeping it there until the modal is closed.\n * - It disables scrolling of the page content while open.\n * - Adds the appropriate ARIA roles are automatically.\n * - Easily pluggable animations via a `<Transition/>` component.\n *\n * Note that, in the same way the backdrop element prevents users from clicking or interacting\n * with the page content underneath the Modal, Screen readers also need to be signaled to not to\n * interact with page content while the Modal is open. To do this, we use a common technique of applying\n * the `aria-hidden='true'` attribute to the non-Modal elements in the Modal `container`. This means that for\n * a Modal to be truly modal, it should have a `container` that is _outside_ your app's\n * React hierarchy (such as the default: document.body).\n */\n\nvar Modal = function (_React$Component) {\n  _inherits(Modal, _React$Component);\n\n  function Modal() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Modal);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _initialiseProps.call(_this), _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Modal.prototype.omitProps = function omitProps(props, propTypes) {\n\n    var keys = Object.keys(props);\n    var newProps = {};\n    keys.map(function (prop) {\n      if (!Object.prototype.hasOwnProperty.call(propTypes, prop)) {\n        newProps[prop] = props[prop];\n      }\n    });\n\n    return newProps;\n  };\n\n  Modal.prototype.render = function render() {\n    var _props = this.props,\n        show = _props.show,\n        container = _props.container,\n        children = _props.children,\n        Transition = _props.transition,\n        backdrop = _props.backdrop,\n        dialogTransitionTimeout = _props.dialogTransitionTimeout,\n        className = _props.className,\n        style = _props.style,\n        onExit = _props.onExit,\n        onExiting = _props.onExiting,\n        onEnter = _props.onEnter,\n        onEntering = _props.onEntering,\n        onEntered = _props.onEntered;\n\n\n    var dialog = _react2.default.Children.only(children);\n    var filteredProps = this.omitProps(this.props, Modal.propTypes);\n\n    var mountModal = show || Transition && !this.state.exited;\n    if (!mountModal) {\n      return null;\n    }\n\n    var _dialog$props = dialog.props,\n        role = _dialog$props.role,\n        tabIndex = _dialog$props.tabIndex;\n\n\n    if (role === undefined || tabIndex === undefined) {\n      dialog = (0, _react.cloneElement)(dialog, {\n        role: role === undefined ? 'document' : role,\n        tabIndex: tabIndex == null ? '-1' : tabIndex\n      });\n    }\n\n    if (Transition) {\n      dialog = _react2.default.createElement(\n        Transition,\n        {\n          transitionAppear: true,\n          unmountOnExit: true,\n          'in': show,\n          timeout: dialogTransitionTimeout,\n          onExit: onExit,\n          onExiting: onExiting,\n          onExited: this.handleHidden,\n          onEnter: onEnter,\n          onEntering: onEntering,\n          onEntered: onEntered\n        },\n        dialog\n      );\n    }\n\n    return _react2.default.createElement(\n      _Portal2.default,\n      {\n        ref: this.setMountNode,\n        container: container,\n        onRendered: this.onPortalRendered\n      },\n      _react2.default.createElement(\n        'div',\n        _extends({\n          ref: this.setModalNodeRef,\n          role: role || 'dialog'\n        }, filteredProps, {\n          style: style,\n          className: className\n        }),\n        backdrop && this.renderBackdrop(),\n        _react2.default.createElement(\n          _RefHolder2.default,\n          { ref: this.setDialogRef },\n          dialog\n        )\n      )\n    );\n  };\n\n  Modal.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    if (nextProps.show) {\n      this.setState({ exited: false });\n    } else if (!nextProps.transition) {\n      // Otherwise let handleHidden take care of marking exited.\n      this.setState({ exited: true });\n    }\n  };\n\n  Modal.prototype.componentWillUpdate = function componentWillUpdate(nextProps) {\n    if (!this.props.show && nextProps.show) {\n      this.checkForFocus();\n    }\n  };\n\n  Modal.prototype.componentDidMount = function componentDidMount() {\n    this._isMounted = true;\n    if (this.props.show) {\n      this.onShow();\n    }\n  };\n\n  Modal.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var transition = this.props.transition;\n\n\n    if (prevProps.show && !this.props.show && !transition) {\n      // Otherwise handleHidden will call this.\n      this.onHide();\n    } else if (!prevProps.show && this.props.show) {\n      this.onShow();\n    }\n  };\n\n  Modal.prototype.componentWillUnmount = function componentWillUnmount() {\n    var _props2 = this.props,\n        show = _props2.show,\n        transition = _props2.transition;\n\n\n    this._isMounted = false;\n\n    if (show || transition && !this.state.exited) {\n      this.onHide();\n    }\n  };\n\n  Modal.prototype.autoFocus = function autoFocus() {\n    if (!this.props.autoFocus) {\n      return;\n    }\n\n    var dialogElement = this.getDialogElement();\n    var currentActiveElement = (0, _activeElement2.default)((0, _ownerDocument2.default)(this));\n\n    if (dialogElement && !(0, _contains2.default)(dialogElement, currentActiveElement)) {\n      this.lastFocus = currentActiveElement;\n\n      if (!dialogElement.hasAttribute('tabIndex')) {\n        (0, _warning2.default)(false, 'The modal content node does not accept focus. For the benefit of ' + 'assistive technologies, the tabIndex of the node is being set ' + 'to \"-1\".');\n\n        dialogElement.setAttribute('tabIndex', -1);\n      }\n\n      dialogElement.focus();\n    }\n  };\n\n  Modal.prototype.restoreLastFocus = function restoreLastFocus() {\n    // Support: <=IE11 doesn't support `focus()` on svg elements (RB: #917)\n    if (this.lastFocus && this.lastFocus.focus) {\n      this.lastFocus.focus();\n      this.lastFocus = null;\n    }\n  };\n\n  Modal.prototype.getDialogElement = function getDialogElement() {\n    return _reactDom2.default.findDOMNode(this.dialog);\n  };\n\n  Modal.prototype.isTopModal = function isTopModal() {\n    return this.props.manager.isTopModal(this);\n  };\n\n  return Modal;\n}(_react2.default.Component);\n\nModal.propTypes = _extends({}, _Portal2.default.propTypes, {\n\n  /**\n   * Set the visibility of the Modal\n   */\n  show: _propTypes2.default.bool,\n\n  /**\n   * A Node, Component instance, or function that returns either. The Modal is appended to it's container element.\n   *\n   * For the sake of assistive technologies, the container should usually be the document body, so that the rest of the\n   * page content can be placed behind a virtual backdrop as well as a visual one.\n   */\n  container: _propTypes2.default.oneOfType([_componentOrElement2.default, _propTypes2.default.func]),\n\n  /**\n   * A callback fired when the Modal is opening.\n   */\n  onShow: _propTypes2.default.func,\n\n  /**\n   * A callback fired when either the backdrop is clicked, or the escape key is pressed.\n   *\n   * The `onHide` callback only signals intent from the Modal,\n   * you must actually set the `show` prop to `false` for the Modal to close.\n   */\n  onHide: _propTypes2.default.func,\n\n  /**\n   * Include a backdrop component.\n   */\n  backdrop: _propTypes2.default.oneOfType([_propTypes2.default.bool, _propTypes2.default.oneOf(['static'])]),\n\n  /**\n   * A function that returns a backdrop component. Useful for custom\n   * backdrop rendering.\n   *\n   * ```js\n   *  renderBackdrop={props => <MyBackdrop {...props} />}\n   * ```\n   */\n  renderBackdrop: _propTypes2.default.func,\n\n  /**\n   * A callback fired when the escape key, if specified in `keyboard`, is pressed.\n   */\n  onEscapeKeyDown: _propTypes2.default.func,\n\n  /**\n   * Support for this function will be deprecated. Please use `onEscapeKeyDown` instead\n   * A callback fired when the escape key, if specified in `keyboard`, is pressed.\n   * @deprecated\n   */\n  onEscapeKeyUp: (0, _deprecated2.default)(_propTypes2.default.func, 'Please use onEscapeKeyDown instead for consistency'),\n\n  /**\n   * A callback fired when the backdrop, if specified, is clicked.\n   */\n  onBackdropClick: _propTypes2.default.func,\n\n  /**\n   * A style object for the backdrop component.\n   */\n  backdropStyle: _propTypes2.default.object,\n\n  /**\n   * A css class or classes for the backdrop component.\n   */\n  backdropClassName: _propTypes2.default.string,\n\n  /**\n   * A css class or set of classes applied to the modal container when the modal is open,\n   * and removed when it is closed.\n   */\n  containerClassName: _propTypes2.default.string,\n\n  /**\n   * Close the modal when escape key is pressed\n   */\n  keyboard: _propTypes2.default.bool,\n\n  /**\n   * A `<Transition/>` component to use for the dialog and backdrop components.\n   */\n  transition: _elementType2.default,\n\n  /**\n   * The `timeout` of the dialog transition if specified. This number is used to ensure that\n   * transition callbacks are always fired, even if browser transition events are canceled.\n   *\n   * See the Transition `timeout` prop for more infomation.\n   */\n  dialogTransitionTimeout: _propTypes2.default.number,\n\n  /**\n   * The `timeout` of the backdrop transition if specified. This number is used to\n   * ensure that transition callbacks are always fired, even if browser transition events are canceled.\n   *\n   * See the Transition `timeout` prop for more infomation.\n   */\n  backdropTransitionTimeout: _propTypes2.default.number,\n\n  /**\n   * When `true` The modal will automatically shift focus to itself when it opens, and\n   * replace it to the last focused element when it closes. This also\n   * works correctly with any Modal children that have the `autoFocus` prop.\n   *\n   * Generally this should never be set to `false` as it makes the Modal less\n   * accessible to assistive technologies, like screen readers.\n   */\n  autoFocus: _propTypes2.default.bool,\n\n  /**\n   * When `true` The modal will prevent focus from leaving the Modal while open.\n   *\n   * Generally this should never be set to `false` as it makes the Modal less\n   * accessible to assistive technologies, like screen readers.\n   */\n  enforceFocus: _propTypes2.default.bool,\n\n  /**\n   * When `true` The modal will restore focus to previously focused element once\n   * modal is hidden\n   */\n  restoreFocus: _propTypes2.default.bool,\n\n  /**\n   * Callback fired before the Modal transitions in\n   */\n  onEnter: _propTypes2.default.func,\n\n  /**\n   * Callback fired as the Modal begins to transition in\n   */\n  onEntering: _propTypes2.default.func,\n\n  /**\n   * Callback fired after the Modal finishes transitioning in\n   */\n  onEntered: _propTypes2.default.func,\n\n  /**\n   * Callback fired right before the Modal transitions out\n   */\n  onExit: _propTypes2.default.func,\n\n  /**\n   * Callback fired as the Modal begins to transition out\n   */\n  onExiting: _propTypes2.default.func,\n\n  /**\n   * Callback fired after the Modal finishes transitioning out\n   */\n  onExited: _propTypes2.default.func,\n\n  /**\n   * A ModalManager instance used to track and manage the state of open\n   * Modals. Useful when customizing how modals interact within a container\n   */\n  manager: _propTypes2.default.object.isRequired\n});\nModal.defaultProps = {\n  show: false,\n  backdrop: true,\n  keyboard: true,\n  autoFocus: true,\n  enforceFocus: true,\n  restoreFocus: true,\n  onHide: function onHide() {},\n  manager: modalManager,\n  renderBackdrop: function renderBackdrop(props) {\n    return _react2.default.createElement('div', props);\n  }\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n\n  this.state = { exited: !this.props.show };\n\n  this.renderBackdrop = function () {\n    var _props3 = _this2.props,\n        backdropStyle = _props3.backdropStyle,\n        backdropClassName = _props3.backdropClassName,\n        renderBackdrop = _props3.renderBackdrop,\n        Transition = _props3.transition,\n        backdropTransitionTimeout = _props3.backdropTransitionTimeout;\n\n\n    var backdropRef = function backdropRef(ref) {\n      return _this2.backdrop = ref;\n    };\n\n    var backdrop = renderBackdrop({\n      ref: backdropRef,\n      style: backdropStyle,\n      className: backdropClassName,\n      onClick: _this2.handleBackdropClick\n    });\n\n    if (Transition) {\n      backdrop = _react2.default.createElement(\n        Transition,\n        { transitionAppear: true,\n          'in': _this2.props.show,\n          timeout: backdropTransitionTimeout\n        },\n        backdrop\n      );\n    }\n\n    return backdrop;\n  };\n\n  this.onPortalRendered = function () {\n    _this2.autoFocus();\n\n    if (_this2.props.onShow) {\n      _this2.props.onShow();\n    }\n  };\n\n  this.onShow = function () {\n    var doc = (0, _ownerDocument2.default)(_this2);\n    var container = (0, _getContainer2.default)(_this2.props.container, doc.body);\n\n    _this2.props.manager.add(_this2, container, _this2.props.containerClassName);\n\n    _this2._onDocumentKeydownListener = (0, _addEventListener2.default)(doc, 'keydown', _this2.handleDocumentKeyDown);\n\n    _this2._onDocumentKeyupListener = (0, _addEventListener2.default)(doc, 'keyup', _this2.handleDocumentKeyUp);\n\n    _this2._onFocusinListener = (0, _addFocusListener2.default)(_this2.enforceFocus);\n  };\n\n  this.onHide = function () {\n    _this2.props.manager.remove(_this2);\n\n    _this2._onDocumentKeydownListener.remove();\n\n    _this2._onDocumentKeyupListener.remove();\n\n    _this2._onFocusinListener.remove();\n\n    if (_this2.props.restoreFocus) {\n      _this2.restoreLastFocus();\n    }\n  };\n\n  this.setMountNode = function (ref) {\n    _this2.mountNode = ref ? ref.getMountNode() : ref;\n  };\n\n  this.setModalNodeRef = function (ref) {\n    _this2.modalNode = ref;\n  };\n\n  this.setDialogRef = function (ref) {\n    _this2.dialog = ref;\n  };\n\n  this.handleHidden = function () {\n    _this2.setState({ exited: true });\n    _this2.onHide();\n\n    if (_this2.props.onExited) {\n      var _props4;\n\n      (_props4 = _this2.props).onExited.apply(_props4, arguments);\n    }\n  };\n\n  this.handleBackdropClick = function (e) {\n    if (e.target !== e.currentTarget) {\n      return;\n    }\n\n    if (_this2.props.onBackdropClick) {\n      _this2.props.onBackdropClick(e);\n    }\n\n    if (_this2.props.backdrop === true) {\n      _this2.props.onHide();\n    }\n  };\n\n  this.handleDocumentKeyDown = function (e) {\n    if (_this2.props.keyboard && e.keyCode === 27 && _this2.isTopModal()) {\n      if (_this2.props.onEscapeKeyDown) {\n        _this2.props.onEscapeKeyDown(e);\n      }\n\n      _this2.props.onHide();\n    }\n  };\n\n  this.handleDocumentKeyUp = function (e) {\n    if (_this2.props.keyboard && e.keyCode === 27 && _this2.isTopModal()) {\n      if (_this2.props.onEscapeKeyUp) {\n        _this2.props.onEscapeKeyUp(e);\n      }\n    }\n  };\n\n  this.checkForFocus = function () {\n    if (_inDOM2.default) {\n      _this2.lastFocus = (0, _activeElement2.default)();\n    }\n  };\n\n  this.enforceFocus = function () {\n    if (!_this2.props.enforceFocus || !_this2._isMounted || !_this2.isTopModal()) {\n      return;\n    }\n\n    var dialogElement = _this2.getDialogElement();\n    var currentActiveElement = (0, _activeElement2.default)((0, _ownerDocument2.default)(_this2));\n\n    if (dialogElement && !(0, _contains2.default)(dialogElement, currentActiveElement)) {\n      dialogElement.focus();\n    }\n  };\n};\n\nModal.Manager = _ModalManager2.default;\n\nexports.default = Modal;\nmodule.exports = exports['default'];"],"mappings":"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"},"metadata":{},"sourceType":"script"}