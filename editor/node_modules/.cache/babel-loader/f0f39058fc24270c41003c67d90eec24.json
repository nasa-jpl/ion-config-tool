{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _class = require('dom-helpers/class');\n\nvar _class2 = _interopRequireDefault(_class);\n\nvar _style = require('dom-helpers/style');\n\nvar _style2 = _interopRequireDefault(_style);\n\nvar _scrollbarSize = require('dom-helpers/util/scrollbarSize');\n\nvar _scrollbarSize2 = _interopRequireDefault(_scrollbarSize);\n\nvar _isOverflowing = require('./utils/isOverflowing');\n\nvar _isOverflowing2 = _interopRequireDefault(_isOverflowing);\n\nvar _manageAriaHidden = require('./utils/manageAriaHidden');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction findIndexOf(arr, cb) {\n  var idx = -1;\n  arr.some(function (d, i) {\n    if (cb(d, i)) {\n      idx = i;\n      return true;\n    }\n  });\n  return idx;\n}\n\nfunction findContainer(data, modal) {\n  return findIndexOf(data, function (d) {\n    return d.modals.indexOf(modal) !== -1;\n  });\n}\n\nfunction setContainerStyle(state, container) {\n  var style = {\n    overflow: 'hidden'\n  }; // we are only interested in the actual `style` here\n  // becasue we will override it\n\n  state.style = {\n    overflow: container.style.overflow,\n    paddingRight: container.style.paddingRight\n  };\n\n  if (state.overflowing) {\n    // use computed style, here to get the real padding\n    // to add our scrollbar width\n    style.paddingRight = parseInt((0, _style2.default)(container, 'paddingRight') || 0, 10) + (0, _scrollbarSize2.default)() + 'px';\n  }\n\n  (0, _style2.default)(container, style);\n}\n\nfunction removeContainerStyle(_ref, container) {\n  var style = _ref.style;\n  Object.keys(style).forEach(function (key) {\n    return container.style[key] = style[key];\n  });\n}\n/**\n * Proper state managment for containers and the modals in those containers.\n *\n * @internal Used by the Modal to ensure proper styling of containers.\n */\n\n\nvar ModalManager = function ModalManager() {\n  var _this = this;\n\n  var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref2$hideSiblingNode = _ref2.hideSiblingNodes,\n      hideSiblingNodes = _ref2$hideSiblingNode === undefined ? true : _ref2$hideSiblingNode,\n      _ref2$handleContainer = _ref2.handleContainerOverflow,\n      handleContainerOverflow = _ref2$handleContainer === undefined ? true : _ref2$handleContainer;\n\n  _classCallCheck(this, ModalManager);\n\n  this.add = function (modal, container, className) {\n    var modalIdx = _this.modals.indexOf(modal);\n\n    var containerIdx = _this.containers.indexOf(container);\n\n    if (modalIdx !== -1) {\n      return modalIdx;\n    }\n\n    modalIdx = _this.modals.length;\n\n    _this.modals.push(modal);\n\n    if (_this.hideSiblingNodes) {\n      (0, _manageAriaHidden.hideSiblings)(container, modal.mountNode);\n    }\n\n    if (containerIdx !== -1) {\n      _this.data[containerIdx].modals.push(modal);\n\n      return modalIdx;\n    }\n\n    var data = {\n      modals: [modal],\n      //right now only the first modal of a container will have its classes applied\n      classes: className ? className.split(/\\s+/) : [],\n      overflowing: (0, _isOverflowing2.default)(container)\n    };\n\n    if (_this.handleContainerOverflow) {\n      setContainerStyle(data, container);\n    }\n\n    data.classes.forEach(_class2.default.addClass.bind(null, container));\n\n    _this.containers.push(container);\n\n    _this.data.push(data);\n\n    return modalIdx;\n  };\n\n  this.remove = function (modal) {\n    var modalIdx = _this.modals.indexOf(modal);\n\n    if (modalIdx === -1) {\n      return;\n    }\n\n    var containerIdx = findContainer(_this.data, modal);\n    var data = _this.data[containerIdx];\n    var container = _this.containers[containerIdx];\n    data.modals.splice(data.modals.indexOf(modal), 1);\n\n    _this.modals.splice(modalIdx, 1); // if that was the last modal in a container,\n    // clean up the container\n\n\n    if (data.modals.length === 0) {\n      data.classes.forEach(_class2.default.removeClass.bind(null, container));\n\n      if (_this.handleContainerOverflow) {\n        removeContainerStyle(data, container);\n      }\n\n      if (_this.hideSiblingNodes) {\n        (0, _manageAriaHidden.showSiblings)(container, modal.mountNode);\n      }\n\n      _this.containers.splice(containerIdx, 1);\n\n      _this.data.splice(containerIdx, 1);\n    } else if (_this.hideSiblingNodes) {\n      //otherwise make sure the next top modal is visible to a SR\n      (0, _manageAriaHidden.ariaHidden)(false, data.modals[data.modals.length - 1].mountNode);\n    }\n  };\n\n  this.isTopModal = function (modal) {\n    return !!_this.modals.length && _this.modals[_this.modals.length - 1] === modal;\n  };\n\n  this.hideSiblingNodes = hideSiblingNodes;\n  this.handleContainerOverflow = handleContainerOverflow;\n  this.modals = [];\n  this.containers = [];\n  this.data = [];\n};\n\nexports.default = ModalManager;\nmodule.exports = exports['default'];","map":{"version":3,"names":["exports","__esModule","_class","require","_class2","_interopRequireDefault","_style","_style2","_scrollbarSize","_scrollbarSize2","_isOverflowing","_isOverflowing2","_manageAriaHidden","obj","default","_classCallCheck","instance","Constructor","TypeError","findIndexOf","arr","cb","idx","some","d","i","findContainer","data","modal","modals","indexOf","setContainerStyle","state","container","style","overflow","paddingRight","overflowing","parseInt","removeContainerStyle","_ref","Object","keys","forEach","key","ModalManager","_this","_ref2","arguments","length","undefined","_ref2$hideSiblingNode","hideSiblingNodes","_ref2$handleContainer","handleContainerOverflow","add","className","modalIdx","containerIdx","containers","push","hideSiblings","mountNode","classes","split","addClass","bind","remove","splice","removeClass","showSiblings","ariaHidden","isTopModal","module"],"sources":["/Users/rlborgen/git/ionconfig/editor/node_modules/react-overlays/lib/ModalManager.js"],"sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _class = require('dom-helpers/class');\n\nvar _class2 = _interopRequireDefault(_class);\n\nvar _style = require('dom-helpers/style');\n\nvar _style2 = _interopRequireDefault(_style);\n\nvar _scrollbarSize = require('dom-helpers/util/scrollbarSize');\n\nvar _scrollbarSize2 = _interopRequireDefault(_scrollbarSize);\n\nvar _isOverflowing = require('./utils/isOverflowing');\n\nvar _isOverflowing2 = _interopRequireDefault(_isOverflowing);\n\nvar _manageAriaHidden = require('./utils/manageAriaHidden');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction findIndexOf(arr, cb) {\n  var idx = -1;\n  arr.some(function (d, i) {\n    if (cb(d, i)) {\n      idx = i;\n      return true;\n    }\n  });\n  return idx;\n}\n\nfunction findContainer(data, modal) {\n  return findIndexOf(data, function (d) {\n    return d.modals.indexOf(modal) !== -1;\n  });\n}\n\nfunction setContainerStyle(state, container) {\n  var style = { overflow: 'hidden' };\n\n  // we are only interested in the actual `style` here\n  // becasue we will override it\n  state.style = {\n    overflow: container.style.overflow,\n    paddingRight: container.style.paddingRight\n  };\n\n  if (state.overflowing) {\n    // use computed style, here to get the real padding\n    // to add our scrollbar width\n    style.paddingRight = parseInt((0, _style2.default)(container, 'paddingRight') || 0, 10) + (0, _scrollbarSize2.default)() + 'px';\n  }\n\n  (0, _style2.default)(container, style);\n}\n\nfunction removeContainerStyle(_ref, container) {\n  var style = _ref.style;\n\n\n  Object.keys(style).forEach(function (key) {\n    return container.style[key] = style[key];\n  });\n}\n/**\n * Proper state managment for containers and the modals in those containers.\n *\n * @internal Used by the Modal to ensure proper styling of containers.\n */\n\nvar ModalManager = function ModalManager() {\n  var _this = this;\n\n  var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref2$hideSiblingNode = _ref2.hideSiblingNodes,\n      hideSiblingNodes = _ref2$hideSiblingNode === undefined ? true : _ref2$hideSiblingNode,\n      _ref2$handleContainer = _ref2.handleContainerOverflow,\n      handleContainerOverflow = _ref2$handleContainer === undefined ? true : _ref2$handleContainer;\n\n  _classCallCheck(this, ModalManager);\n\n  this.add = function (modal, container, className) {\n    var modalIdx = _this.modals.indexOf(modal);\n    var containerIdx = _this.containers.indexOf(container);\n\n    if (modalIdx !== -1) {\n      return modalIdx;\n    }\n\n    modalIdx = _this.modals.length;\n    _this.modals.push(modal);\n\n    if (_this.hideSiblingNodes) {\n      (0, _manageAriaHidden.hideSiblings)(container, modal.mountNode);\n    }\n\n    if (containerIdx !== -1) {\n      _this.data[containerIdx].modals.push(modal);\n      return modalIdx;\n    }\n\n    var data = {\n      modals: [modal],\n      //right now only the first modal of a container will have its classes applied\n      classes: className ? className.split(/\\s+/) : [],\n\n      overflowing: (0, _isOverflowing2.default)(container)\n    };\n\n    if (_this.handleContainerOverflow) {\n      setContainerStyle(data, container);\n    }\n\n    data.classes.forEach(_class2.default.addClass.bind(null, container));\n\n    _this.containers.push(container);\n    _this.data.push(data);\n\n    return modalIdx;\n  };\n\n  this.remove = function (modal) {\n    var modalIdx = _this.modals.indexOf(modal);\n\n    if (modalIdx === -1) {\n      return;\n    }\n\n    var containerIdx = findContainer(_this.data, modal);\n    var data = _this.data[containerIdx];\n    var container = _this.containers[containerIdx];\n\n    data.modals.splice(data.modals.indexOf(modal), 1);\n\n    _this.modals.splice(modalIdx, 1);\n\n    // if that was the last modal in a container,\n    // clean up the container\n    if (data.modals.length === 0) {\n      data.classes.forEach(_class2.default.removeClass.bind(null, container));\n\n      if (_this.handleContainerOverflow) {\n        removeContainerStyle(data, container);\n      }\n\n      if (_this.hideSiblingNodes) {\n        (0, _manageAriaHidden.showSiblings)(container, modal.mountNode);\n      }\n      _this.containers.splice(containerIdx, 1);\n      _this.data.splice(containerIdx, 1);\n    } else if (_this.hideSiblingNodes) {\n      //otherwise make sure the next top modal is visible to a SR\n      (0, _manageAriaHidden.ariaHidden)(false, data.modals[data.modals.length - 1].mountNode);\n    }\n  };\n\n  this.isTopModal = function (modal) {\n    return !!_this.modals.length && _this.modals[_this.modals.length - 1] === modal;\n  };\n\n  this.hideSiblingNodes = hideSiblingNodes;\n  this.handleContainerOverflow = handleContainerOverflow;\n  this.modals = [];\n  this.containers = [];\n  this.data = [];\n};\n\nexports.default = ModalManager;\nmodule.exports = exports['default'];"],"mappings":"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"},"metadata":{},"sourceType":"script"}